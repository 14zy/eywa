function t_store_init(recid,opts){var rec=$('#rec'+recid);var el_store=rec.find('.js-store');var containerEl=rec.find('.js-store-grid-cont');var prodPopup=t_store_get_productPopup_html(recid,opts);el_store.append(prodPopup);var loadMoreBtn=t_store_get_loadMoreBtn_html(opts);containerEl.after(loadMoreBtn);var pageMode=$(".t-records").attr("data-tilda-mode");opts.isPublishedPage=(pageMode!=='edit'&&pageMode!=='preview');if(opts.isPublishedPage){t_store_checkUrl(opts,recid)}
if(opts.storepart===''){rec.find('.js-store-grid-cont-preloader').hide();return}
setTimeout(function(){rec.find('.js-store-grid-cont-preloader').removeClass('t-store__grid-cont-preloader_hidden')},1500);t_store_loadProducts('',recid,opts);t_store_mobileHoriz_checkBtnVisibility(recid,opts);if(opts.isHorizOnMob){var handIcon=t_store_get_handIcon_html(opts);rec.find('.js-store-grid-cont-preloader').before(handIcon)}
$(window).bind('resize',t_throttle(function(){t_store_unifyCardsHeights(recid,opts)},200));$(".t-store").bind("displayChanged",function(){t_store_unifyCardsHeights(recid,opts)});t_store_hoverZoom_init(recid);try{if(opts.verticalAlignButtons){setTimeout(function(){t_store_verticalAlignButtons(recid,opts);$(window).bind('resize',t_throttle(function(){t_store_verticalAlignButtons(recid,opts)},200));$(".t-store").bind("displayChanged",function(){t_store_verticalAlignButtons(recid,opts)})},1000)}}catch(e){console.log('verticalAlignButtons error: '+e)}}
function t_store_verticalAlignButtons(recid,opts){var rec=$('#rec'+recid);var wrappers=rec.find('.t-store__card__textwrapper');var maxHeight=0;var itemsInRow=opts.blocksInRow;var mobileView=$(window).width()<=480;var tableView=$(window).width()<=960&&$(window).width()>480;var mobileOneRow=$(window).width()<=960&&rec.find('.t-store__grid-cont_mobile-one-row')[0]?true:!1;var mobileTwoItemsInRow=$(window).width()<=480&&rec.find('.t-store__mobile-two-columns')[0]?true:!1;if(mobileView){itemsInRow=1}
if(tableView){itemsInRow=2}
if(mobileTwoItemsInRow){itemsInRow=2}
if(mobileOneRow){itemsInRow=999999}
var i=1;var wrappersInRow=[];$.each(wrappers,function(key,element){element.style.height='auto';if(itemsInRow===1){element.style.height='auto'}else{wrappersInRow.push(element);if(element.offsetHeight>maxHeight){maxHeight=element.offsetHeight}
$.each(wrappersInRow,function(key,wrapper){wrapper.style.height=maxHeight+'px'});if(i===itemsInRow){i=0;maxHeight=0;wrappersInRow=[]}
i++}})}
function t_store_hoverZoom_init(recid){if(isMobile){return}
var rec=$('#rec'+recid);try{if(rec.find('[data-hover-zoom]')[0]){if(!jQuery.cachedZoomScript){jQuery.cachedZoomScript=function(url){var options={dataType:'script',cache:!0,url:url};return jQuery.ajax(options)}}
$.cachedZoomScript('https://static.tildacdn.com/js/tilda-hover-zoom-1.0.min.js').done(function(script,textStatus){if(textStatus=='success'){setTimeout(function(){t_hoverZoom_init(recid)},500)}else{console.log('Upload script error: '+textStatus)}})}}catch(e){console.log('Zoom image init error: '+e.message)}}
function t_store_addStoreParts(recid,opts,storePartsArr){var rec=$('#rec'+recid);var el_store=rec.find('.js-store');opts.storePartsArr=storePartsArr;var tabsHtml=t_store_get_storePartsControl_html(recid,opts);el_store.find('.js-store-parts-select-container').prepend(tabsHtml);t_store_initStoreParts(recid,opts)}
function t_store_initStoreParts(recid,opts){var rec=$('#rec'+recid);rec.find('.js-store-parts-switcher').on('click',function(){var storepartuid=$(this).attr('data-storepart-uid');rec.find('.t-active').removeClass('t-active');$(this).addClass('t-active');opts.storepart=storepartuid;t_store_showLoadersForProductsList(recid);t_store_loadProducts('',recid,opts);t_store_mobileHoriz_checkBtnVisibility(recid,opts)})}
function t_store_showLoadersForProductsList(recid){var rec=$('#rec'+recid);rec.find('.t-store__card').addClass('t-store__card_hidden');var preloaderTimerId=setTimeout(function(){rec.find('.js-store-grid-cont').html('');rec.find('.js-store-grid-cont-preloader').css({'display':'','opacity':'0'}).animate({opacity:1},200)},1000);rec.data('preloader-timeout',preloaderTimerId)}
function t_store_loadProducts(method,recid,opts,slice,relevantsOpts){var showRelevants=method==='relevants'?!0:!1;var c=Date.now();var storepartuid=opts.storepart;var isFirstSlice=!slice||parseInt(slice)===1;var rec=$('#rec'+recid);var loadMoreBtn=rec.find('.js-store-load-more-btn');var gridContainer=showRelevants?rec.find('.js-store-relevants-grid-cont'):rec.find('.js-store-grid-cont');var dataObj;if(showRelevants){dataObj={storepartuid:storepartuid,productuid:relevantsOpts.currentProductUid,quantity:relevantsOpts.relevantsQuantity,method:relevantsOpts.relevantsMethod,sort:relevantsOpts.relevantsSort}}else{dataObj={storepartuid:storepartuid,recid:recid,c:c}}
if(isFirstSlice){dataObj.getparts=!0}
if(slice){dataObj.slice=slice}
if(opts.filters){dataObj.filters=opts.filters}
if(opts.sort){dataObj.sort=opts.sort}
var apiUrl=showRelevants?'https://store.tildacdn.com/api/getrelevantproducts/':'https://store.tildacdn.com/api/getproductslist/';if(!opts.isPublishedPage){dataObj.projectid=$('.t-records').attr('data-tilda-project-id');apiUrl=showRelevants?'https://tilda.cc/projects/store/getrelevantproducts/':'https://tilda.cc/projects/store/getproductslist/'}
var ts=Date.now();$.ajax({type:'GET',url:apiUrl,data:dataObj,dataType:'text',success:function(data){loadMoreBtn.removeClass('t-btn_sending');clearTimeout(rec.data('preloader-timeout'));rec.find('.js-store-grid-cont-preloader').hide();if(isFirstSlice){gridContainer.html('')}
if(typeof data==='string'&&data.substring(0,1)!=='{'&&(data.indexOf('ERROR:')!==-1||data.indexOf('Wrong')!==-1)){console.log('show error');var el_errorBox=t_store_get_errorBox(opts,data);gridContainer.append(el_errorBox);rec.find('.js-store-error-msg').fadeIn(200);return}
if(data===''){return}
try{var obj=jQuery.parseJSON(data)}catch(e){console.log(data)}
if(typeof obj!=='object'){return}
var productsArr=showRelevants?obj.relevants:obj.products;t_store_process(productsArr,recid,opts,slice?!0:!1,showRelevants);if(obj.parts&&obj.parts.length>1&&rec.find('.js-store-parts-switcher').length===0&&!opts.hideStoreParts){t_store_addStoreParts(recid,opts,obj.parts)}
if(obj.filter==='y'&&!opts.hideFilters){t_store_loadFilters(recid,opts)}
if(obj.nextslice){loadMoreBtn.show();loadMoreBtn.off('click');loadMoreBtn.on('click',function(){loadMoreBtn.addClass('t-btn_sending');if(showRelevants){t_store_loadProducts('relevants',recid,opts,obj.nextslice)}else{t_store_loadProducts('',recid,opts,obj.nextslice)}})}else{loadMoreBtn.hide()}
t_store_filters_prodsNumber_update(rec,opts,obj)},error:function(xhr){loadMoreBtn.removeClass('t-btn_sending');var ts_delta=Date.now()-ts;if(xhr.status==0&&ts_delta<100){alert('Request error (get store products). Please check internet connection...')}},timeout:1000*25})}
function t_store_loadOneProduct(recid,opts,curProdUid){var c=Date.now();var storepartuid=opts.storepart;var dataObj={storepartuid:storepartuid,recid:recid,productuid:curProdUid,c:c};return $.ajax({type:'GET',url:'https://store.tildacdn.com/api/getproduct/',data:dataObj,dataType:'text',success:function(data){},error:function(){console.log('Can\'t get product with uid = '+curProdUid+' in storepart = '+opts.storepart)},timeout:1000*25})}
function t_store_loadProducts_byId(idArr){var c=Date.now();var dataObj={productsuid:idArr,c:c};return $.ajax({type:'GET',url:'https://store.tildacdn.com/api/getproductsbyuid/',data:dataObj,dataType:'text',success:function(data){},error:function(){console.log('Can\'t get getproductsbyuid. Requesting idArr: ');console.log(idArr)},timeout:1000*25})}
function t_store_loadFilters(recid,opts){var el_rec=$('#rec'+recid);if(el_rec.find('.js-store-filter').length>0){return}
var c=Date.now();var storepartuid=opts.storepart;var dataObj={storepartuid:storepartuid,c:c};var apiUrl='https://store.tildacdn.com/api/getfilters/';if(!opts.isPublishedPage){dataObj.projectid=$('.t-records').attr('data-tilda-project-id');apiUrl='https://tilda.cc/projects/store/getfilters/'}
$.ajax({type:'GET',url:apiUrl,data:dataObj,dataType:'text',success:function(data){try{var obj=jQuery.parseJSON(data)}catch(e){console.log(data)}
if(typeof obj!=='object'){return}
t_store_filters_init(recid,opts,obj)},error:function(){console.log('Can\'t get filters in storepart = '+opts.storepart)},timeout:1000*25})}
function t_store_process(productsArr,recid,opts,isNextSlice,isRelevantsShow){var rec=$('#rec'+recid);var gridContainer=rec.find('.js-store-grid-cont');if(isRelevantsShow){gridContainer=rec.find('.js-store-relevants-grid-cont')}
var separator=t_store_get_horizSeparator_html(opts);var obj_products={};if(productsArr.length===0){var el_emptyMsg=t_store_get_emptyMsg_html(opts);gridContainer.append(el_emptyMsg);rec.find('.js-store-empty-part-msg').fadeIn(200);return}
var productsHtml='';var blocksInRowForRelevant=4;var blocksInRow=isRelevantsShow?blocksInRowForRelevant:opts.blocksInRow;$.each(productsArr,function(key,product){if((key>0&&key%blocksInRow===0)||(key===0&&isNextSlice)){productsHtml+=separator}
productsHtml+=t_store_get_productCard_html(rec,product,opts,isRelevantsShow,recid);obj_products[product.uid]=product});t_store_process_appendAndShowProducts(rec,gridContainer,productsHtml);$.each(productsArr,function(key,product){var el_product=rec.find('.js-product.t-item[data-product-gen-uid="'+product.uid+'"]');el_product.data('cardSize','small');var product=obj_products[product.uid];t_store_addProductOptions(recid,product,el_product,opts);t_prod__initProduct(recid,el_product)});if(!isNextSlice&&opts.isFlexCols&&opts.isHorizOnMob){gridContainer.find('.t-store__tail-gap').remove();gridContainer.append('<div class="t-store__tail-gap"></div>')}
if(window.lazy=='y'){t_lazyload_update()}
if($('.t706__cartwin').length>0){tcart__addEvent__links()}else{console.log('Error: cart block is not added to this page')}
if(!isRelevantsShow){t_store_initPopup(recid,obj_products,opts)}
t_store_mobileHoriz_updLazy(recid);t_store_unifyCardsHeights(recid,opts);if(!opts.previewmode){try{addEditFieldEvents_new(recid)}catch(e){console.log(e.message)}}}
function t_store_process_appendAndShowProducts(rec,gridContainer,productsHtml){gridContainer.append(productsHtml);if(rec.data('already-loaded-first-products')===!0){setTimeout(function(){rec.find('.t-store__card').removeClass('t-store__card_hidden')},10)}else{rec.find('.t-store__card').removeClass('t-store__card_hidden');rec.data('already-loaded-first-products',!0)}}
function t_store_mobileHoriz_updLazy(recid){var scrollContainer=$('#rec'+recid+' .js-store-grid-cont');var curMode=$('.t-records').attr('data-tilda-mode');if(scrollContainer.length&&curMode!='edit'&&curMode!='preview'){scrollContainer.bind('scroll',t_throttle(function(){if(window.lazy=='y'){t_lazyload_update()}},500))}}
function t_store_mobileHoriz_checkBtnVisibility(recid,opts){t_store_mobileHoriz_hideLoadBtn(recid,opts);$(window).bind('resize',t_throttle(function(){t_store_mobileHoriz_hideLoadBtn(recid,opts)},500))}
function t_store_mobileHoriz_hideLoadBtn(recid,opts){var rec=$('#rec'+recid);var containerEl=rec.find('.js-store-grid-cont');if($(window).width()<960&&opts.hasMobileHorizScroll){rec.find('.js-store-load-more-btn').remove()}}
function t_store_get_storePartsControl_html(recid,opts){var str='';str+='<div class="t-store__parts-switch-wrapper t-align_center">';str+='<div class="js-store-parts-switcher t-store__parts-switch-btn t-name t-name_xs t-menu__link-item t-active" data-storepart-uid="'+opts.storepart+'">'+t_store_dict('all')+'</div>';for(var i=0;i<opts.storePartsArr.length;i++){var storePart=opts.storePartsArr[i];str+='<div class="js-store-parts-switcher t-store__parts-switch-btn t-name t-name_xs t-menu__link-item" data-storepart-uid="'+storePart.uid+'">';str+='    '+storePart.title;str+='</div>'}
str+='</div>';return str}
function t_store_get_productPopup_html(recid,opts){var str='';var statAttr=opts.popup_opts.popupStat?'data-track-popup="'+opts.popup_opts.popupStat+'"':'';var popupClass='t-popup__container t-popup__container-static';var showRelevants=opts.showRelevants;var titleRelevants=opts.titleRelevants?opts.titleRelevants:window.tildaBrowserLang==='RU'?'Смотрите также':'See also';if(opts.popup_opts.isVertical){popupClass+=' t-store__popup-container_8-cols'}
var popupStyle=opts.popup_opts.overlayBgColorRgba?'style="background-color:'+opts.popup_opts.overlayBgColorRgba+'"':'';var containerStyle=opts.popup_opts.containerBgColor?'style="background-color:'+opts.popup_opts.containerBgColor+'"':'';var sliderClass=opts.popup_opts.isVertical?'':'t-store__prod-popup__col-left t-col t-col_'+opts.popup_opts.columns;var infoAlignClass='t-align_'+(opts.popup_opts.align==='center'?'center':'left')+' ';var infoClass=infoAlignClass+(opts.popup_opts.isVertical?'':'t-store__prod-popup__col-right t-col t-col_'+opts.popup_opts.columns2);str+='<div class="t-popup" '+statAttr+' '+popupStyle+'>';str+='    '+t_store_get_productPopup_closeIcon_html(opts);str+='    '+t_store_get_productPopup_closeText_html(opts);str+='    <div class="'+popupClass+'" '+containerStyle+'>';str+='        <div>';str+='            <div class="t-store__prod-popup__container">';str+='                <div class="js-store-product js-product">';str+='                    <div class="t-store__prod-popup__slider js-store-prod-slider '+sliderClass+'"></div>';str+='                    <div class="t-store__prod-popup__info '+infoClass+'">';str+='                        '+t_store_get_productPopup_titleText_html();str+='                        <div class="js-store-price-wrapper t-store__prod-popup__price-wrapper">';str+='                            '+t_store_get_productPopup_onePrice_html(opts,'current');str+='                            '+t_store_get_productPopup_onePrice_html(opts,'old');str+='                        </div>';str+='                        <div class="js-product-controls-wrapper"></div>';str+='                        '+t_store_get_productPopup_buyBtn_html(opts);str+='                        '+t_store_get_productPopup_text_html();str+='                    </div>';str+='                </div>';if(showRelevants){str+='                <div class="t-store__relevants__container">';str+='                    <div class="t-col t-store__relevants__title-wrapper">';str+='                        <div class="t-store__relevants__title t-uptitle t-uptitle_xxl" style="'+opts.typo.title+'">'+titleRelevants+'</div>';str+='                    </div>';str+='                    <div class="t-store__scroll-icon-wrapper">';str+='                        <svg class="t-store__scroll-icon" style="width:22px;fill:#bebebe;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300">';str+='                            <path d="M97.2 298.2S56.1 225 38.8 193.3c-23-42.2-26.8-60-10.9-68.8 9.9-5.5 23.6-3.2 32 11.4l19.6 31.2V44.8s-1.2-32.3 21.8-32.3c24.5 0 22.4 32.3 22.4 32.3v59.4s12.9-9.3 28-5.1c7.7 2.1 16.7 5.8 21.5 18 0 0 30.7-14.9 46 16.8 0 0 35.4-7 35.4 29.7s-44.2 134.6-44.2 134.6H97.2zM249.9.5l-10.6 10.6 24.1 23.8H158.5v15h105l-24.2 23.9 10.6 10.6 42.5-42z" class="st0"/>';str+='                        </svg>';str+='                    </div>';str+='                    <div class="t-store__relevants-grid-cont js-store-relevants-grid-cont t-store__grid-cont_mobile-one-row"></div>';str+='                </div>'}
str+='            </div>';str+='        </div>';str+='    </div>';str+='</div>';return str}
function t_store_get_productPopup_text_html(opts){var str='';str+='<div class="js-store-prod-text t-store__prod-popup__text t-descr t-descr_xxs"></div>';return str}
function t_store_get_productPopup_buyBtn_html(opts){var str='';if(opts.popup_opts.btnTitle!==''){str+='<div class="t-store__prod-popup__btn-wrapper">';str+='    <a href="#order" class="t-store__prod-popup__btn t-btn t-btn_sm" style="'+opts.btn1_style+'">';str+='        <table style="width:100%; height:100%;"><tr><td class="js-store-prod-popup-buy-btn-txt">';str+='            '+opts.popup_opts.btnTitle;str+='        </td></tr></table>';str+='    </a>';str+='</div>'}
return str}
function t_store_get_productPopup_onePrice_html(opts,type){var str='';var priceStylingClass=(type==='current'?'js-store-prod-price t-store__prod-popup__price':'js-store-prod-price-old t-store__prod-popup__price_old');var styleAttr='';var styleStr='';var color=type==='current'?opts.price.color:opts.price.colorOld;styleStr+=color?'color:'+color+';':'';styleStr+=opts.price.fontWeight?'font-weight:'+opts.price.fontWeight+';':'';styleAttr=styleStr!==''?('style = "'+styleStr+'"'):'';var currency=opts.currencyTxt?'<div class="t-store__prod-popup__price-currency">'+opts.currencyTxt+'</div>':'';var jsProdClass=(type==='current'?'js-product-price js-store-prod-price-val':'js-store-prod-price-old-val');str+='<div class="'+priceStylingClass+' t-store__prod-popup__price-item t-name t-name_md" '+styleAttr+'>';str+='    '+(opts.currencySide!=='r'&&currency?currency:'');str+='    '+'<div class="'+jsProdClass+' t-store__prod-popup__price-value"></div>';str+='    '+(opts.currencySide==='r'&&currency?currency:'');str+='</div>';return str}
function t_store_get_productPopup_titleText_html(opts){var str='';str+='<div class="t-store__prod-popup__title-wrapper">';str+='    <div class="js-store-prod-name js-product-name t-store__prod-popup__name t-name t-name_xl"></div>';str+='    <div class="t-store__prod-popup__sku t-descr t-descr_xxs">';str+=(window.tildaBrowserLang==='RU'?'Артикул: ':'SKU: ');str+='<span class="js-store-prod-sku js-product-sku">';str+='</span>';str+='    </div>';str+='</div>';return str}
function t_store_get_productPopup_closeIcon_html(opts){var str='';var fillColor=opts.popup_opts.iconColor?opts.popup_opts.iconColor:'#fff';str+='<div class="t-popup__close">';str+='    <div class="t-popup__close-wrapper">';str+='        <svg class="t-popup__close-icon" width="23px" height="23px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">';str+='            <g stroke="none" stroke-width="1" fill="'+fillColor+'" fill-rule="evenodd">';str+='                <rect transform="translate(11.313708, 11.313708) rotate(-45.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect>';str+='                <rect transform="translate(11.313708, 11.313708) rotate(-315.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect>';str+='            </g>';str+='        </svg>';str+='    </div>';str+='</div>';return str}
function t_store_get_productPopup_closeText_html(opts){if(!opts.popup_opts.closeText){return ''}
var style='';if(opts.popup_opts.iconColor){style='style="color:'+opts.popup_opts.iconColor+'"'}
var str='';str+='<div class="t-store__prod-popup__close-txt-wr">';str+='    <div class="js-store-close-text t-store__prod-popup__close-txt t-descr t-descr_xxs" '+style+'>';str+='        '+opts.popup_opts.closeText;str+='    </div>';str+='</div>';return str}
function t_store_get_loadMoreBtn_html(opts){var str='';str+='<div class="t-store__load-more-btn-wrap t-align_center">';str+='    <div class="js-store-load-more-btn t-store__load-more-btn t-btn" style="'+opts.btn1_style+'display:none;">';str+='        <table style="width:100%; height:100%;"><tr><td>';str+='            '+t_store_dict('loadmore');str+='        </td></tr></table>';str+='    </div>';str+='</div>';return str}
function t_store_get_handIcon_html(opts){var str='';str+='<div class="t-store__scroll-icon-wrapper">';str+='    <svg class="t-store__scroll-icon" style="width:22px;fill:#bebebe;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300">';str+='        <path d="M97.2 298.2S56.1 225 38.8 193.3c-23-42.2-26.8-60-10.9-68.8 9.9-5.5 23.6-3.2 32 11.4l19.6 31.2V44.8s-1.2-32.3 21.8-32.3c24.5 0 22.4 32.3 22.4 32.3v59.4s12.9-9.3 28-5.1c7.7 2.1 16.7 5.8 21.5 18 0 0 30.7-14.9 46 16.8 0 0 35.4-7 35.4 29.7s-44.2 134.6-44.2 134.6H97.2zM249.9.5l-10.6 10.6 24.1 23.8H158.5v15h105l-24.2 23.9 10.6 10.6 42.5-42z" class="st0"/>';str+='    </svg>';str+='</div>';return str}
function t_store_get_emptyMsg_html(opts){var str='';var styles=opts.typo.titleColor?'color:'+opts.typo.titleColor+';border-color:'+opts.typo.titleColor+';':'';var classStr='js-store-empty-part-msg t-store__empty-part-msg-cont';classStr+=opts.colClassFullWidth?' '+opts.colClassFullWidth:'';str+='<div class="'+classStr+'" style="display:none;">';str+='    <div class=" t-store__empty-part-msg-wrapper t-descr t-descr_sm" style="'+styles+'">';str+='        <div class="t-store__empty-part-msg">';str+='        '+t_store_dict('emptypartmsg');str+='        </div>';str+='    </div>';str+='</div>';return str}
function t_store_get_errorBox(opts,errorText){var str='';var styles=opts.typo.titleColor?'color:'+opts.typo.titleColor+';border-color:'+opts.typo.titleColor+';':'';var classStr='js-store-error-msg t-store__error-msg-cont';classStr+=opts.colClassFullWidth?' '+opts.colClassFullWidth:'';str+='<div class="'+classStr+'" style="display:none;">';str+='    <div class="t-store__error-msg-wrapper t-descr t-descr_sm" style="'+styles+'">';str+='        <div class="t-store__error-msg">';str+='        '+errorText;str+='        </div>';str+='    </div>';str+='</div>';return str}
function t_store_get_productCard_html(rec,product,opts,isRelevantsShow,recid){var colClass=isRelevantsShow?'t-col t-col_3':opts.colClass;var edition=t_store_product_getFirstAvailableEditionData(product.editions);var str='';var alignClass=(opts.align==='left'?'t-align_left':'t-align_center');var animClass='';var animAttr=opts.itemsAnim?'data-animate-style="'+opts.itemsAnim+'" data-animate-chain="yes"':'';var isSoldOut=(edition.quantity&&parseInt(edition.quantity)===0);var quantityAttr='data-product-inv="'+edition.quantity+'"';var url=t_store_get_productCard_link(opts.prodCard.btnLink1,product,isRelevantsShow,recid);var linkTarget=t_store_get_productCard_targetAttr(opts.prodCard.btnLink1,product);var link={open:(opts.previewmode?'<a href="'+url+'" '+linkTarget+'>':''),close:(opts.previewmode?'</a>':'')};if(isSoldOut&&url==='#order'){link.open='';link.close=''}
str+='<div class="js-product t-store__card t-store__card_hidden '+colClass+' '+alignClass+' t-item '+animClass+'" '+animAttr+' data-product-lid="'+product.uid+'" data-product-uid="'+product.uid+'" data-product-gen-uid="'+product.uid+'" '+quantityAttr+'>';str+=opts.prodCard.hasWrap?t_store_get_productCard_wrapperStructure(product,edition,opts,link,isRelevantsShow,recid):t_store_get_productCard_simpleStructure(product,edition,opts,link,isRelevantsShow,recid);str+='</div>';return str}
function t_store_get_productCard_simpleStructure(product,edition,opts,link,isRelevantsShow,recid){var controlsStyle=opts.prodCard.showOpts?'':'style="display:none;"';var strImg=t_store_get_productCard_img_html(product,opts);var str='';str+=link.open;str+='    '+strImg;str+='    '+t_store_get_productCard_txtAndPrice_html(product,edition,opts,strImg);str+=link.close;str+='<div class="js-product-controls-wrapper t-store__card__prod-controls-wrapper" '+controlsStyle+'></div>';str+=t_store_get_productCard_btn_html(product,edition,opts,isRelevantsShow,recid);return str}
function t_store_get_productCard_wrapperStructure(product,edition,opts,link,isRelevantsShow,recid){var wrapStyles=t_store_get_productCard_getWrapperStylesStr(opts);var controlsStyle=opts.prodCard.showOpts?'':'style="display:none;"';var str='';var padClass=opts.prodCard&&opts.prodCard.txtPad?'t-store__card__wrap_pad-'+opts.prodCard.txtPad:'';str+='<div class="t-store__card__wrap_all '+padClass+'" style="'+wrapStyles+'">';str+='    '+link.open;str+='        '+t_store_get_productCard_img_html(product,opts);str+='    '+link.close;str+='    <div class="t-store__card__wrap_txt-and-btns">';str+='        <div class="store__card__wrap_txt-and-opts">';str+='            '+link.open;str+='                '+t_store_get_productCard_txtAndPrice_html(product,edition,opts);str+='            '+link.close;str+='            <div class="js-product-controls-wrapper t-store__card__prod-controls-wrapper" '+controlsStyle+'></div>';str+='        </div>';str+='        '+t_store_get_productCard_btn_html(product,edition,opts,isRelevantsShow,recid);str+='    </div>';str+='</div>';return str}
function t_store_get_productCard_getWrapperStylesStr(opts){var str='';str+=opts.prodCard.bgColor?'background-color:'+opts.prodCard.bgColor+';':'';str+=opts.prodCard.borderRadius?'border-radius:'+parseInt(opts.prodCard.borderRadius)+'px;':'';if(opts.prodCard.shadowSize||opts.shadowOpacity){var size=opts.prodCard.shadowSize?parseInt(opts.prodCard.shadowSize)+'px':'20px';var opacity=opts.prodCard.shadowOpacity?'0.'+opts.prodCard.shadowOpacity:'0.3';str+='box-shadow: 0px 0px '+size+' 0px rgba(0, 0, 0, '+opacity+');'}
return str}
function t_store_get_productCard_img_html(product,opts){var str='';var mobileNoPaddingClass=(opts.hasOriginalAspectRatio&&!opts.isHorizOnMob?'t-store__card__imgwrapper_original-ratio':'');var wrapperClassStr='t-store__card__imgwrapper '+mobileNoPaddingClass+(opts.isFlexCols?opts.imageRatioClass:'');var style=opts.imageHeight&&!opts.isFlexCols?'style="padding-bottom:'+(parseInt(opts.imageHeight)*100/opts.colWidth)+'%;"':'';var hoverImgEl=t_store_get_productCard_imgElHover_html(product,opts);var hasHover=(opts.imageHover&&hoverImgEl);var fieldAttrStrName=(opts.hasOriginalAspectRatio?'imgfield':'bgimgfield');var imgFieldAttr=(product.editions.length===1?fieldAttrStrName+'="st_gallery__'+product.uid+':::0"':'');var imgSrc=t_store_getProductFirstImg(product);if(imgSrc!==''){if(opts.hasOriginalAspectRatio){var imgEl='<img '+t_store_getLazySrc(opts,imgSrc)+' class="js-product-img t-store__card__img '+(hasHover?'t-store__card__img_hover':'')+' t-img" '+imgFieldAttr+'/>'}else{var stylesStr=t_store_get_productCard_getImgStyles(opts);var imgEl='<div class="js-product-img t-store__card__bgimg '+(hasHover?'t-store__card__bgimg_hover':'')+' t-bgimg" data-original="'+imgSrc+'" style="background-image:url('+t_store_getLazyUrl(opts,imgSrc)+');'+stylesStr+'" '+imgFieldAttr+'></div>'}
str+='<div class="'+wrapperClassStr+'" '+style+'>';str+='    '+t_store_get_productCard_mark_html(product,opts);str+='    '+imgEl;str+='    '+(opts.imageHover?hoverImgEl:'');str+='</div>';return str}else{return ''}}
function t_store_get_productCard_imgElHover_html(product,opts){if(product.gallery&&product.gallery[0]==='['){var galleryArr=jQuery.parseJSON(product.gallery);if(typeof galleryArr[1]!=='undefined'){var imgSrc=galleryArr[1].img;var stylesStr=t_store_get_productCard_getImgStyles(opts);return opts.hasOriginalAspectRatio?'<img '+t_store_getLazySrc(opts,imgSrc)+' class="t-store__card__img t-store__card__img_second t-img"/>':'<div class="t-store__card__bgimg_second t-bgimg" data-original="'+imgSrc+'" style="background-image:url('+t_store_getLazyUrl(opts,imgSrc)+');'+stylesStr+'"></div>'}}
return ''}
function t_store_get_productCard_getImgStyles(opts){if(opts.prodCard.borderRadius){var size=parseInt(opts.prodCard.borderRadius);return 'border-radius:'+size+'px '+size+'px 0px 0px; top: -2px;'}
return ''}
function t_store_get_productCard_mark_html(product,opts){if(!product.mark){return ''}
var stylesStr='';stylesStr+=(opts.markColor?'color:'+opts.markColor+';':'');stylesStr+=(opts.markBgColor?'background-color:'+opts.markBgColor+';':'');var style=(stylesStr?'style="'+stylesStr+'"':'');var str='';str+='<div class="t-store__card__mark-wrapper">';str+='    <div class="t-store__card__mark" '+style+'>';str+='        '+product.mark;str+='    </div>';str+='</div>';return str}
function t_store_get_productCard_txtAndPrice_html(product,edition,opts,strImg){var str='';var removePadStyle=(strImg===''?'style="padding-top:0px;"':'');str+='        <div class="t-store__card__textwrapper" '+removePadStyle+'>';str+='            '+t_store_get_productCard_txt_html(product,edition,opts);str+='            <div class="js-store-price-wrapper t-store__card__price-wrapper">';str+='                '+t_store_get_productCard_onePrice_html(product,edition,opts,'current');str+='                '+t_store_get_productCard_onePrice_html(product,edition,opts,'old');str+='                '+(parseInt(edition.quantity)===0?t_store_get_soldOutMsg_html():'');str+='            </div>';str+='        </div>';return str}
function t_store_get_productCard_txt_html(product,edition,opts){var str='';if(product.title){if(parseInt(opts.blocksInRow)===4){var typoClass='t-name_xs'}else if(parseInt(opts.blocksInRow)===2){var typoClass='t-name_xl'}else{var typoClass='t-name_md'}
var titleFieldAttr=(product.editions.length===1?'field="st_title__'+edition.uid+'" data-redactor-toolbar="no"':'');str+='<div class="js-store-prod-name js-product-name t-store__card__title t-name '+typoClass+'" style="'+opts.typo.title+'" '+titleFieldAttr+'>';str+=product.title;str+='</div>'}
if(edition.sku){var skuVisCss=opts.prodCard.showOpts?'':'display:none;';var skuColor=opts.typo.descrColor?('color:'+opts.typo.descrColor+';'):'';var skuStyle='style="'+skuVisCss+skuColor+'"';var skuFieldAttr=(product.editions.length===1?'field="st_sku__'+edition.uid+'" data-redactor-toolbar="no"':'');str+='<div class="t-store__card__sku t-descr t-descr_xxs" '+skuStyle+'>';str+=(window.tildaBrowserLang==='RU'?'Артикул: ':'SKU: ');str+='<span class="js-store-prod-sku js-product-sku" '+skuFieldAttr+'>';str+=edition.sku;str+='</span>';str+='</div>'}
if(product.descr){var descrFieldAttr=(product.editions.length===1?'field="st_descr__'+edition.uid+'" data-redactor-toolbar="no"':'');str+='<div class="js-store-prod-descr t-store__card__descr t-descr t-descr_xxs" style="'+opts.typo.descr+'" '+descrFieldAttr+'>';str+='    '+product.descr;str+='</div>'}
return str}
function t_store_get_productCard_onePrice_html(product,edition,opts,type){var value=(type==='current'?edition.price:edition.priceold);var priceType=(type==='current'?'price':'priceold');if(!value||value==='0'){return ''}
var str='';var priceStylingClass=(type==='current'?'t-store__card__price':'t-store__card__price_old');var styleAttr='';var styleStr='';var color=type==='current'?opts.price.color:opts.price.colorOld;styleStr+=color?'color:'+color+';':'';styleStr+=opts.price.fontSize?'font-size:'+opts.price.fontSize+';':'';styleStr+=opts.price.fontWeight?'font-weight:'+opts.price.fontWeight+';':'';styleAttr=styleStr!==''?('style = "'+styleStr+'"'):'';var priceFieldAttr=(product.editions.length===1?'field="st_'+priceType+'__'+edition.uid+'" data-redactor-toolbar="no"':'');var currency=opts.currencyTxt?'<div class="t-store__card__price-currency">'+opts.currencyTxt+'</div>':'';var jsProdClass=(type==='current'?'js-product-price js-store-prod-price-val':'js-store-prod-price-old-val');str+='<div class="'+priceStylingClass+' t-store__card__price-item t-name t-name_xs" '+styleAttr+'>';str+='    '+(opts.currencySide!=='r'&&currency?currency:'');str+='    '+'<div class="'+jsProdClass+' t-store__card__price-value" '+priceFieldAttr+'>'+value+'</div>';str+='    '+(opts.currencySide==='r'&&currency?currency:'');str+='</div>';return str}
function t_store_get_productCard_btn_html(product,edition,opts,isRelevantsShow,recid){if(!opts.prodCard.btnTitle1&&!opts.prodCard.btnTitle2){return ''}
var str='';var btnSizeClass=(opts.btnSize==='sm'?'t-btn_xs':'t-btn_sm');var isSoldOut=(edition.quantity!==''&&parseInt(edition.quantity)===0);var canClickBtn1=(!isSoldOut||(isSoldOut&&opts.prodCard.btnLink1!=='order'));var canClickBtn2=(!isSoldOut||(isSoldOut&&opts.prodCard.btnLink2!=='order'));str+='<div class="t-store__card__btns-wrapper">';if(opts.prodCard.btnTitle1&&canClickBtn1){var link=t_store_get_productCard_link(opts.prodCard.btnLink1,product,isRelevantsShow,recid);var linkTarget=t_store_get_productCard_targetAttr(opts.prodCard.btnLink1,product);str+='<a href="'+link+'" '+linkTarget+' class="js-store-prod-btn t-store__card__btn t-btn '+btnSizeClass+'" style="'+opts.btn1_style+'"><table style="width:100%; height:100%;"><tr><td>'+opts.prodCard.btnTitle1+'</td></tr></table></a>'}
if(opts.prodCard.btnTitle2&&canClickBtn2){var link=t_store_get_productCard_link(opts.prodCard.btnLink2,product,isRelevantsShow,recid);var linkTarget=t_store_get_productCard_targetAttr(opts.prodCard.btnLink2,product);str+='<a href="'+link+'" '+linkTarget+' class="js-store-prod-btn2 t-store__card__btn t-store__card__btn_second t-btn '+btnSizeClass+'" style="'+opts.btn2_style+'"><table style="width:100%; height:100%;"><tr><td>'+opts.prodCard.btnTitle2+'</td></tr></table></a>'}
str+='</div>';return str}
function t_store_get_productCard_link(link,product,isRelevantsShow,recid){if(link==='order'){return '#order'}
if(isRelevantsShow){return t_store_generateUrl(recid,product,isRelevantsShow)}
if(link==='popup'){if(product.buttonlink){var url=product.buttonlink;if(url.indexOf('//')===-1&&url.slice(0,1)!=='/'){url='http://'+url}
return url}else{return '#prodpopup'}}
return '#prodpopup'}
function t_store_get_productCard_targetAttr(link,product){if(link==='popup'&&product.buttonlink&&product.buttontarget==='_blank'){return 'target="_blank"'}
return ''}
function t_store_get_horizSeparator_html(opts){var str='<div class="t-clear t-store__grid-separator" [[style]]></div>';str=str.replace('[[style]]',opts.vindent?'style="margin-bottom:'+opts.vindent+';"':'');return str}
function t_store_unifyCardsHeights(recid,opts){if(!opts.prodCard||!opts.prodCard.hasWrap){return}
var rec=$('#rec'+recid);var cards=rec.find('.t-store__card');var blocksPerRow=t_store_unifyCardsHeights_getBlocksInRow(opts,cards);if($(window).width()<=480&&!opts.isHorizOnMob){rec.find('.t-store__card__wrap_txt-and-btns').css("height","auto");return}
for(var i=0;i<cards.length;i+=blocksPerRow){var maxH=0,rowCards=cards.slice(i,i+blocksPerRow).find('.t-store__card__wrap_txt-and-btns');rowCards.each(function(){var txt=$(this).find(".store__card__wrap_txt-and-opts"),btns=$(this).find(".t-store__card__btns-wrapper"),height=txt.outerHeight()+btns.outerHeight();if(height>maxH){maxH=height}});rowCards.css("height",maxH)}}
function t_store_unifyCardsHeights_getBlocksInRow(opts,cards){if($(window).width()<=960&&opts.isHorizOnMob){return cards.length}else if($(window).width()<=960){return 2}else{return parseInt(opts.blocksInRow)}}
function t_store_get_soldOutMsg_html(){return '<div class="js-store-prod-sold-out t-store__card__sold-out-msg t-name t-name_xs">'+t_store_dict('soldOut')+'</div>'}
function t_store_initPopup(recid,obj_products,options){var rec=$('#rec'+recid);var popupTrigger=rec.find('[href^="#prodpopup"]');popupTrigger.click(function(e){e.preventDefault();var el_prodItem=$(this).closest('.js-product');var lid_prod=el_prodItem.attr('data-product-gen-uid');var productObj=obj_products[lid_prod];t_store_openProductPopup(recid,options,productObj)});if(options.isPublishedPage){setTimeout(function(){t_store_checkUrl(options,recid)},300)}
t_store_copyTypographyFromLeadToPopup(recid)}
function t_store_openProductPopup(recid,opts,productObj){var rec=$('#rec'+recid);var el_popup=rec.find('.t-popup');t_store_drawProdPopup(recid,el_popup,productObj,opts);t_store_showPopup(recid);var analytics=el_popup.attr('data-track-popup');if(analytics>''){var virtTitle=productObj.title;if(!virtTitle){virtTitle='prod'+productObj.uid}
try{if(Tilda&&typeof Tilda.sendEcommerceEvent=='function'){Tilda.sendEcommerceEvent('detail',[{id:''+(productObj.id?productObj.id:productObj.uid),uid:''+productObj.uid,price:''+(productObj.price_min?productObj.price_min:productObj.price),sku:(productObj.sku?productObj.sku:''),name:productObj.title}])}else{Tilda.sendEventToStatistics(analytics,virtTitle)}}catch(e){Tilda.sendEventToStatistics(analytics,virtTitle)}}
if(opts.isPublishedPage){t_store_changeUrl(recid,productObj)}
t_slds_updateSlider(recid);var showRelevants=opts.showRelevants;if(showRelevants){var relevantsMethod=opts.showRelevants==='cc'?'current_category':'all_categories';var relevantsSort='random';var relevantsQuantity=4;t_store_loadProducts('relevants',recid,opts,!1,{currentProductUid:productObj.uid,relevantsQuantity:relevantsQuantity,relevantsMethod:relevantsMethod,relevantsSort:relevantsSort})}}
function t_store_changeUrl(recid,product){var curUrl=window.location.href;if(curUrl.indexOf('/tproduct/')<0&&curUrl.indexOf('%2Ftproduct%2F')<0){var newUrl=t_store_generateUrl(recid,product);if(typeof history.replaceState!='undefined'){window.history.replaceState('','',newUrl)}}}
function t_store_generateUrl(recid,product,isRelevantsShow){var prodTitle=t_store_convertTextToUrlSlug(product.title);var prodPath='/tproduct/'+recid+'-'+product.uid+'-'+prodTitle;if(isRelevantsShow){prodPath=window.origin+prodPath;return prodPath}
var curUrl=window.location.href;if(curUrl.indexOf('#')>=0){curUrl=curUrl.split('#')[0]}
if(curUrl.indexOf('?')>=0){curUrl=curUrl.split('?')[0]}
if(curUrl[curUrl.length-1]==='/'){curUrl=curUrl.slice(0,-1)}
var newUrl=curUrl+prodPath;return newUrl}
function t_store_drawProdPopup(recid,el_popup,product,options){var rec=$('#rec'+recid);var el_product=el_popup.find('.js-product');el_product.data('cardSize','large');t_store_drawProdPopup_drawGallery(recid,el_popup,product,options);el_popup.find('.js-store-product').attr('data-product-lid',product.uid).attr('data-product-uid',product.uid).attr('data-product-gen-uid',product.uid);if(product.title){el_popup.find('.js-store-prod-name').html(product.title).show()}else{el_popup.find('.js-store-prod-name').html('').hide()}
t_store_drawTextAndCharacteristics(el_popup,product);t_store_addProductOptions(recid,product,el_product,options);t_prod__initProduct(recid,el_product)}
function t_store_drawTextAndCharacteristics(el_popup,product){var prodTxt=(product.text?product.text:(product.descr?product.descr:''));if(product.characteristics&&product.characteristics.length>0){prodTxt+=(prodTxt.length>0?'</br></br>':'');product.characteristics.forEach(function(ch){prodTxt+='<p>'+ch.title+': '+ch.value+'</p>'})}
if(prodTxt){el_popup.find('.js-store-prod-text').html(prodTxt).show()}else{el_popup.find('.js-store-prod-text').html('').hide()}}
function t_store_addProductOptions(recid,product,el_product,options){var optionsWrapper=el_product.find('.js-product-controls-wrapper');optionsWrapper.html('');t_store_product_initEditions(recid,product,el_product,options);var param1={name:product.prod_option,values:product.prod_variants};var param2={name:product.prod_option2,values:product.prod_variants2};var param3={name:product.prod_option3,values:product.prod_variants3};var param4={name:product.prod_option4,values:product.prod_variants4};var param5={name:product.prod_option5,values:product.prod_variants5};t_store_product_addOneOptionsControl('modificator',param1,optionsWrapper);t_store_product_addOneOptionsControl('modificator',param2,optionsWrapper);t_store_product_addOneOptionsControl('modificator',param3,optionsWrapper);t_store_product_addOneOptionsControl('modificator',param4,optionsWrapper);t_store_product_addOneOptionsControl('modificator',param5,optionsWrapper)}
function t_store_get_control_option_html(){var str='';str+='<div class="js-product-option t-product__option">';str+='    <div class="js-product-option-name t-product__option-title t-descr t-descr_xxs">[[name]]</div>';str+='    <div class="t-product__option-variants"> <select class="js-product-option-variants t-product__option-select t-descr t-descr_xxs"> [[optiontags]] </select> </div>';str+='</div>';return str}
function t_store_get_control_editionOption_html(){var str='';str+='<div class="js-product-edition-option t-product__option" data-edition-option-id="[[id]]">';str+='    <div class="js-product-edition-option-name t-product__option-title t-descr t-descr_xxs">[[name]]</div>';str+='    <div class="t-product__option-variants"> <select class="js-product-edition-option-variants t-product__option-select t-descr t-descr_xxs"> [[optiontags]] </select> </div>';str+='</div>';return str}
function t_store_checkUrl(opts,recid){var curUrl=window.location.href;var tprodIndex=curUrl.indexOf('/tproduct/');if(/iPhone|iPad|iPod/i.test(navigator.userAgent)&&tprodIndex<0){tprodIndex=curUrl.indexOf('/tproduct/');if(tprodIndex<0){tprodIndex=curUrl.indexOf('%2Ftproduct%2F')}}
if(tprodIndex>=0){var curUrl=curUrl.substring(tprodIndex,curUrl.length);var prodDataArr=curUrl.split('-');if(typeof prodDataArr[1]==='undefined'){return}
var curProdUid=prodDataArr[1];var rec=$('#rec'+recid);var prod=rec.find('.js-store-grid-cont [data-product-gen-uid='+curProdUid+']');var el_popup=rec.find('.t-popup');if(curUrl.indexOf(recid)>=0&&prod.length){if(!el_popup.hasClass('t-popup_show')){rec.find('[data-product-gen-uid='+curProdUid+'] [href^="#prodpopup"]').triggerHandler('click')}
var prodOffset=prod.offset().top;$(window).scrollTop(prodOffset-100)}else if(curUrl.indexOf(recid)>=0){if(el_popup.hasClass('t-popup_show')){return}
t_store_loadOneProduct(recid,opts,curProdUid).then(function(data){if(typeof data==='string'&&data.substr(0,1)=='{'){try{var dataObj=jQuery.parseJSON(data);var productObj=dataObj.product}catch(e){console.log(data)}
if(productObj===''){console.log('Can\'t get product with uid = '+curProdUid+' in storepart = '+opts.storepart);return}
t_store_openProductPopup(recid,opts,productObj)}else{console.log('Can\'t get product with uid = '+curProdUid+' in storepart = '+opts.storepart)}})}}}
function t_store_showPopup(recid){var el=$('#rec'+recid);var popup=el.find('.t-popup');popup.css('display','block');setTimeout(function(){popup.find('.t-popup__container').addClass('t-popup__container-animated');popup.addClass('t-popup_show');if(window.lazy=='y'){t_lazyload_update()}},50);$('body').addClass('t-body_popupshowed');el.find('.t-popup').click(function(e){if(e.target==this){t_store_closePopup()}});el.find('.t-popup__close, .js-store-close-text').click(function(e){t_store_closePopup()});$(document).keydown(function(e){if(e.keyCode==27){t_store_closePopup()}})}
function t_store_closePopup(){$('body').removeClass('t-body_popupshowed');$('.t-popup').removeClass('t-popup_show');var curUrl=window.location.href;var indexToRemove=curUrl.indexOf('/tproduct/');if(/iPhone|iPad|iPod/i.test(navigator.userAgent)&&indexToRemove<0){indexToRemove=curUrl.indexOf('/tproduct/');if(indexToRemove<0){indexToRemove=curUrl.indexOf('%2Ftproduct%2F')}}
setTimeout(function(){$('.t-popup').scrollTop(0);$('.t-popup').not('.t-popup_show').css('display','none');if(typeof history.replaceState!='undefined'&&indexToRemove!==-1){curUrl=curUrl.substring(0,indexToRemove);window.history.replaceState('','',curUrl)}},300)}
function t_store_copyTypographyFromLeadToPopup(recid){var rec=$('#rec'+recid);var titleStyle=rec.find('.js-store-grid-cont .js-store-prod-name').attr('style');var descrStyle=rec.find('.js-store-grid-cont .js-store-prod-descr').attr('style');rec.find('.t-popup .js-store-prod-name').attr('style',t_store_removeSizesFromStylesLine(titleStyle));rec.find('.t-popup .js-store-prod-text').attr('style',t_store_removeSizesFromStylesLine(descrStyle))}
function t_store_removeSizesFromStylesLine(styleStr){if(typeof styleStr!='undefined'&&(styleStr.indexOf('font-size')>=0||styleStr.indexOf('padding-top')>=0||styleStr.indexOf('padding-bottom')>=0)){var styleStrSplitted=styleStr.split(';');styleStr='';for(var i=0;i<styleStrSplitted.length;i++){if(styleStrSplitted[i].indexOf('font-size')>=0||styleStrSplitted[i].indexOf('padding-top')>=0||styleStrSplitted[i].indexOf('padding-bottom')>=0){styleStrSplitted.splice(i,1);i--;continue}
if(styleStrSplitted[i]==''){continue}
styleStr+=styleStrSplitted[i]+';'}}
return styleStr}
function t_store_drawProdPopup_drawGallery(recid,el_popup,product,options){var rec=$('#rec'+recid);if(!product.gallery){return}
if(typeof product.gallery==='string'){var galleryArr=jQuery.parseJSON(product.gallery)}else{var galleryArr=product.gallery}
if(galleryArr.length===0){el_popup.find('.js-store-prod-slider').html('');return}
var tpl=t_store_get_productcard_slider_html(rec,options);var str=tpl;var strSlides='';var strBullets='';var hasBullets=(options.slider_opts.controls==='thumbs'||options.slider_opts.controls==='arrowsthumbs'||options.slider_opts.controls==='dots'||options.slider_opts.controls==='');$.each(galleryArr,function(key,image){var oneSlideTpl=t_store_get_productcard_oneSlide_html(options);strSlides+=oneSlideTpl.replace('[[activeClass]]',(key===0?'t-slds__item_active':'')).replace('[[productClass]]',(key===0?'js-product-img':'')).replace(/\[\[index\]\]/g,key+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,image.img)).replace(/\[\[imgsource\]\]/g,image.img);if(hasBullets){var oneBulletTpl=t_store_get_productcard_oneSliderBullet_html(options);var oneBulletStr=oneBulletTpl.replace('[[activeClass]]',(key===0?'t-slds__bullet_active':'')).replace(/\[\[index\]\]/g,key+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,image.img)).replace(/\[\[imgsource\]\]/g,image.img);strBullets+=oneBulletStr}});str=str.replace('[[slides]]',strSlides);if(hasBullets){str=str.replace('[[bullets]]',strBullets)}
el_popup.find('.js-store-prod-slider').html(str);var controlsSelStr='.t-slds__arrow_container, .t-slds__bullet_wrapper, .t-slds__thumbsbullet-wrapper';if(galleryArr.length===1){el_popup.find(controlsSelStr).hide()}else{el_popup.find(controlsSelStr).show()}
if(window.tzoominited!==!0){try{t_initZoom()}catch(e){console.log(e.message)}}
t_sldsInit(recid+' .js-store-product')}
function t_store_get_productcard_slider_html(rec,options){var str='';var animationduration='t-slds_animated-none';var animationspeed='300';if(options.slider_opts.anim_speed==='fast'){animationduration='t-slds_animated-fast'}
if(options.slider_opts.anim_speed==='slow'){animationduration='t-slds_animated-slow';animationspeed='500'}
str+='<div class="t-slds" style="visibility: hidden;">';str+='    <div class="t-slds__main">';str+='        <div class="t-slds__container" [[containerStyles]]>';str+='            <div class="t-slds__items-wrapper '+animationduration+' [[noCycleClass]]" data-slider-transition="'+animationspeed+'" data-slider-with-cycle="[[isCycled]]" data-slider-correct-height="true" data-auto-correct-mobile-width="false">';str+='                [[slides]]';str+='            </div>';str+='            [[arrows]]';str+='        </div>';str+='    </div>';str+='    [[bullets]]';str+='</div>';if(options.slider_opts.controls==='arrows'||options.slider_opts.controls==='arrowsthumbs'||options.slider_opts.controls===''){var arrowsTplEl=rec.find('.js-store-tpl-slider-arrows');var arrowsTpl=arrowsTplEl.html();var arrowsWrapperClass='t-slds__arrow_container '+(options.slider_opts.cycle===''?'t-slds__nocycle':'');arrowsTpl='<div class="'+arrowsWrapperClass+'">'+arrowsTpl+'</div>';str=str.replace('[[arrows]]',arrowsTpl)}else{str=str.replace('[[arrows]]','')}
if(options.slider_opts.controls==='thumbs'||options.slider_opts.controls==='arrowsthumbs'){var tpl='<div class="t-slds__thumbsbullet-wrapper '+(options.slider_slidesOpts.bgsize==='contain'?'t-align_center':'')+'">[[bullets]]</div>';str=str.replace('[[bullets]]',tpl)}else if(options.slider_opts.controls==='dots'||options.slider_opts.controls===''){str=str.replace('[[bullets]]','<div class="t-slds__bullet_wrapper">[[bullets]]</div>')}else{str=str.replace('[[bullets]]','')}
str=str.replace('[[containerStyles]]',(options.slider_opts.bgcolor?'style="background-color:'+options.slider_opts.bgcolor+';"':'')).replace('[[noCycleClass]]',(options.slider_opts.cycle?'':'t-slds__nocycle')).replace('[[isCycled]]',(options.slider_opts.cycle?'true':'false'));return str}
function t_store_get_productcard_oneSlide_html(options){var str='';str+='<div class="t-slds__item [[activeClass]]" data-slide-index="[[index]]">';str+='    <div class="t-slds__wrapper" itemscope itemtype="http://schema.org/ImageObject">';str+='        <meta itemprop="image" content="[[imgsource]]">';str+='        <div class="t-slds__imgwrapper [[zoomClass]]" [[zoomAttrs]]>';str+='            <div class="t-slds__bgimg [[containClass]] t-bgimg [[productClass]]" data-original="[[imgsource]]" style="padding-bottom:[[paddingBottomVal]]; background-image: url([[imgsource_lazy]]);">';str+='            </div>';str+='         </div>';str+='    </div>';str+='</div>';str=str.replace('[[zoomAttrs]]',(options.slider_slidesOpts.zoomable?'data-zoom-target="[[index]]" data-zoomable="yes" data-img-zoom-url="[[imgsource]]"':'')).replace('[[zoomClass]]',(options.slider_slidesOpts.zoomable?'t-zoomable':'')).replace('[[containClass]]',(options.slider_slidesOpts.bgsize==='contain'?'t-slds__bgimg-contain':'')).replace('[[paddingBottomVal]]',(options.slider_slidesOpts.ratio*100)+'%');return str}
function t_store_get_productcard_oneSliderBullet_html(options){var str='';if(options.slider_opts.controls==='thumbs'||options.slider_opts.controls==='arrowsthumbs'){str+='<div class="t-slds__thumbsbullet t-slds__bullet [[activeClass]]" data-slide-bullet-for="[[index]]">';str+='    <div class="t-slds__bgimg t-bgimg" data-original="[[imgsource]]" style="padding-bottom: 100%; background-image: url([[imgsource_lazy]]);"></div>';str+='    <div class="t-slds__thumbsbullet-border"></div>';str+='</div>'}
if(options.slider_opts.controls==='dots'||options.slider_opts.controls===''){str+='<div class="t-slds__bullet [[activeClass]]" data-slide-bullet-for="[[index]]">';str+='    <div class="t-slds__bullet_body" [[styles]]></div>';str+='</div>';var styles='';if(options.slider_dotsOpts.size){var size=parseInt(options.slider_dotsOpts.size);size=(size>20?20:size);styles+='width:'+size+'px;height:'+size+'px;'}
if(options.slider_dotsOpts.bgcolor){styles+='background-color:'+options.slider_dotsOpts.bgcolor+';'}
if(options.slider_dotsOpts.bordersize){var borderColor=options.slider_dotsOpts.bgcoloractive?options.slider_dotsOpts.bgcoloractive:'#222';styles+='border: '+options.slider_dotsOpts.bordersize+' solid '+borderColor+';'}
str=str.replace('[[styles]]',(styles!==''?'style="'+styles+'"':''))}
return str}
function t_store_getLazyUrl(opts,imgSrc){if(!opts.isPublishedPage||window.lazy!=='y'){return imgSrc}
if(imgSrc.indexOf('static.tildacdn.com')===-1){return imgSrc}
var arr=imgSrc.split('/');arr.splice(imgSrc.split('/').length-1,0,'-/resizeb/x20');var newSrc=arr.join('/');return newSrc}
function t_store_getLazySrc(opts,imgSrc){if(!opts.isPublishedPage||window.lazy!=='y'){return 'src="'+imgSrc+'"'}
var arr=imgSrc.split('/');arr.splice(imgSrc.split('/').length-1,0,'-/empty');var newSrc=arr.join('/');return 'src="'+newSrc+'" data-original="'+imgSrc+'"'}
function t_store_dict(msg){var dict=[];dict.soldOut={'EN':"Out of Stock",'RU':"Нет в наличии",'FR':"En rupture de stock",'DE':"Ausverkauft",'ES':"Agotado",'PT':"Fora de estoque",'UA':"Немає в наявності",'JA':"在庫切れ",'CN':"缺货"};dict.all={'EN':"All",'RU':"Все",'FR':"Tout",'DE':"Alles",'ES':"Todos",'PT':"Todos",'UA':"Всі",'JA':"すべて",'CN':"所有"};dict.emptypartmsg={'EN':"Nothing found",'RU':"Ничего не найдено",'FR':"Rien trouvé",'DE':"Nichts gefunden",'ES':"Nada encontrado",'PT':"Nada encontrado",'UA':"Нічого не знайдено",'JA':"何も見つかりませんでした",'CN':"什么都没找到"};dict.seeotherproducts={'EN':"See other",'RU':"Другие товары",'FR':"Autres produits",'DE':"Andere Produkte",'ES':"Otros productos",'PT':"Outros produtos",'UA':"інші товари",'JA':"その他の商品",'CN':"其他产品"};dict.addtocart={'EN':"Buy now",'RU':"Купить",'FR':"Acheter",'DE':"Zu kaufen",'ES':"Para comprar",'PT':"Comprar",'UA':"Купити",'JA':"購入する",'CN':"要买"};dict.loadmore={'EN':"Load more",'RU':"Загрузить еще",'FR':"Charger plus",'DE':"Mehr laden",'ES':"Carga más",'PT':"Carregue mais",'UA':"Завантажити ще",'JA':"もっと読み込む",'CN':"裝載更多"};dict.filters={'EN':"Filters",'RU':"Фильтры",'FR':"Filtres",'DE':"Filter",'ES':"Filtros",'PT':"Filtros",'UA':"Фільтри",'JA':"フィルター",'CN':"过滤器"};dict.searchplaceholder={'EN':"Search",'RU':"Поиск",'FR':"Recherche de produit",'DE':"Produktsuche",'ES':"Buscar Productos",'PT':"Procurar Produtos",'UA':"Пошук товарів",'JA':"商品を探す",'CN':"搜索商品"};dict['sort-label']={'EN':"Sort",'RU':"Сортировка",'FR':"Trier",'DE':"Sortieren nach",'ES':"Ordenar",'PT':"Ordenar",'UA':"Сортування",'JA':"並べ替え",'CN':"分类"};dict['sort-default']={'EN':"Sort: by default",'RU':"Порядок: по умолчанию",'FR':"Trier: par défaut",'DE':"Sortieren nach: Standardmäßig",'ES':"Ordenar: por defecto",'PT':"Ordenar: por padrão",'UA':"Сортування: за замовчуванням",'JA':"並べ替え：デフォルトで",'CN':"分类: 默认"};dict['sort-price-asc']={'EN':"Price: Low to High",'RU':"Цена: сначала дешевые",'FR':"Prix: par ordre croissant",'DE':"Preis: aufsteigend",'ES':"Precio: de más bajo a más alto",'PT':"Preço: baixo para alto",'UA':"Ціна: спочатку дешеві",'JA':"価格の安い順番",'CN':"价格: 从便宜到贵"};dict['sort-price-desc']={'EN':"Price: High to Low",'RU':"Цена: сначала дорогие",'FR':"Prix: par ordre décroissant",'DE':"Preis: absteigend",'ES':"Precio: de más alto a más bajo",'PT':"Preço: alto para baixo",'UA':"Ціна: спочатку дорогі ",'JA':"価格の高い順番",'CN':"价格: 从贵到便宜"};dict['sort-name-asc']={'EN':"Title: A — Z",'RU':"Название: А — Я",'FR':"Titre: A — Z",'DE':"Titel: A — Z",'ES':"Título: A — Z",'PT':"Título: A — Z",'UA':"Назва:  A — Z",'JA':"製品名：五十音順 ",'CN':"商品名称: 字母顺序排列"};dict['sort-name-desc']={'EN':"Title: Z — A",'RU':"Название: Я — А",'FR':"Titre: Z — A",'DE':"Titel: Z — A",'ES':"Título: Z — A",'PT':"Título: Z — A",'UA':"Назва: Z — A",'JA':"製品名：降順",'CN':"商品名称: 降序母顺序排列"};dict['sort-created-desc']={'EN':"Sort: newest first",'RU':"Порядок: сперва новые",'FR':"Trier: le plus récent en premier",'DE':"Sortieren nach: Neueste zuerst",'ES':"Ordenar: más nuevos primero",'PT':"Ordenar: mais recente primeiro",'UA':"Сортувати: спочатку нові",'JA':"最新のものから並べ替え",'CN':"分类: 最新的"};dict['sort-created-asc']={'EN':"Sort: oldest first",'RU':"Порядок: сперва старые",'FR':"Trier: le plus ancien en premier",'DE':"Sortieren nach: Älteste zuerst",'ES':"Ordenar: el más antiguo primero",'PT':"Ordenar: mais antigo primeiro",'UA':"Сортування: спочатку старі",'JA':"並べ替え：古いものから",'CN':"分类: 最早的"};dict['filter-price-name']={'EN':"Price",'RU':"Цена",'FR':"Prix",'DE':"Preis",'ES':"Precio",'PT':"Preço",'UA':"Ціна",'JA':"価格",'CN':"价格"};dict['filter-available-name']={'EN':"Availability",'RU':"Наличие",'FR':"Disponibilité",'DE':"Verfügbarkeit",'ES':"Disponibilidad",'PT':"Disponibilidade",'UA':"Наявність",'JA':"可用性",'CN':"可用性"};dict['filter-available-label']={'EN':"Only in stock",'RU':"Только товары в наличии",'FR':"Seulement articles en stock",'DE':"Nur auf Lager",'ES':"Solo artículos en stock",'PT':"Apenas itens em estoque",'UA':"Тільки товари в наявності",'JA':"在庫品のみ",'CN':"只有货"};dict['filter-reset']={'EN':"Clear All",'RU':"Очистить все",'FR':"Tout effacer",'DE':"Alles löschen",'ES':"Limpiar todo",'PT':"Limpar tudo",'UA':"Очистити все",'JA':"すべてクリア",'CN':"全部清除"};dict['filter-prodsnumber']={'EN':"Found",'RU':"Найдено",'FR':"Trouvé",'DE':"Gefunden",'ES':"Encontrado",'PT':"Encontrado",'UA':"Знайдено",'JA':"見つかった",'CN':"发现"};if(typeof window.tildaBrowserLang==='undefined'){t_store_defineUserLang()}
var lang=window.tildaBrowserLang;if(typeof dict[msg]!=undefined){if(typeof dict[msg][lang]!='undefined'&&dict[msg][lang]!=''){return dict[msg][lang]}else{return dict[msg].EN}}}
function t_store_defineUserLang(){window.tildaBrowserLang=window.navigator.userLanguage||window.navigator.language;window.tildaBrowserLang=window.tildaBrowserLang.toUpperCase();if(window.tildaBrowserLang.indexOf('RU')!=-1){window.tildaBrowserLang='RU'}else if(window.tildaBrowserLang.indexOf('FR')!=-1){window.tildaBrowserLang='FR'}else if(window.tildaBrowserLang.indexOf('DE')!=-1){window.tildaBrowserLang='DE'}else if(window.tildaBrowserLang.indexOf('ES')!=-1){window.tildaBrowserLang='ES'}else if(window.tildaBrowserLang.indexOf('PT')!=-1){window.tildaBrowserLang='PT'}else if(window.tildaBrowserLang.indexOf('UA')!=-1){window.tildaBrowserLang='UA'}else if(window.tildaBrowserLang.indexOf('JA')!=-1){window.tildaBrowserLang='JA'}else if(window.tildaBrowserLang.indexOf('CN')!=-1){window.tildaBrowserLang='CN'}else{window.tildaBrowserLang='EN'}}
function t_store_convertTextToUrlSlug(txt){var str=txt;var str=str.replace(/^\s+|\s+$/g,'');str=str.replace('&lt;','');str=str.toLowerCase();str=t_store_transliterate(str);str=str.replace(/[^a-z0-9 -]/g,'');str=str.replace(/\s+/g,'-');str=str.replace(/-+/g,'-');if(str.length===0||!str.match(/[a-z]/i)){str=txt;str=str.replace(/\s+/g,'-');str=str.replace('&lt;','')}
if(str.length>40){str=str.slice(0,40);if(str[str.length-1]==='-'){str=str.substring(0,str.length-1)}}
return str}
function t_store_transliterate(word){var a={"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"'","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"'","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"'","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"'","б":"b","ю":"yu"};return $.map(word.split(''),function(char){return a[char]||char}).join("")}
function t_store_escapeQuote(text){if(!text){return ''}
var map={'"':'&quot;',"'":'&#039;'};return text.replace(/["']/g,function(m){return map[m]})}
function t_store_product_initEditions(recid,product,el_product,options){var optionsWrapper=el_product.find('.js-product-controls-wrapper');t_store_product_addEditionControls(product,optionsWrapper);var hasAvailable=t_store_product_selectAvailableEdition(recid,product,el_product,options);if(hasAvailable){t_store_product_triggerSoldOutMsg(el_product,!1,options);t_store_product_disableUnavailOpts(el_product,product)}else{t_store_product_triggerSoldOutMsg(el_product,!0,options)}
el_product.find('.js-product-edition-option').on('change',function(){var edition=t_store_product_detectEditionByControls(el_product,product);if(edition){t_store_product_updateEdition(recid,el_product,edition);t_prod__updatePrice(recid,el_product);var isSoldOut=(parseInt(edition.quantity)===0);t_store_product_triggerSoldOutMsg(el_product,isSoldOut,options)}else{var el_changedOpt=$(this);var changedOptName=el_changedOpt.attr('data-edition-option-id');var optsValsBeforeChangedArr=[];for(var i=0;i<product.editionOptions.length;i++){var curOption=product.editionOptions[i];optsValsBeforeChangedArr.push(curOption);if(curOption.name===changedOptName){break}}
var hasAvailable=t_store_product_selectAvailableEdition(recid,product,el_product,options,optsValsBeforeChangedArr);t_prod__updatePrice(recid,el_product);t_store_product_triggerSoldOutMsg(el_product,!hasAvailable,options)}
el_product.find('.js-product-edition-option-variants option').removeAttr('disabled');t_store_product_disableUnavailOpts(el_product,product)})}
function t_store_product_detectEditionByControls(el_product,product){for(var i=0;i<product.editions.length;i++){var curEdition=product.editions[i];var isCurEditionSelected=!0;for(var j=0;j<product.editionOptions.length;j++){var curOption=product.editionOptions[j];var el_select=t_store_product_getEditionSelectEl(el_product,curOption);var curControlVal=el_select.find('.js-product-edition-option-variants').val();var curEditionVal=curEdition[curOption.name];if(curControlVal!==curEditionVal){isCurEditionSelected=!1}}
if(isCurEditionSelected){return curEdition}}
return null}
function t_store_product_addEditionControls(product,optionsWrapper){if(!product.editionOptions){product.editionOptions=t_store_product_getEditionOptionsArr(product)}
product.editionOptions.forEach(function(curOption){t_store_product_addOneOptionsControl('editionopt',curOption,optionsWrapper)})}
function t_store_product_selectAvailableEdition(recid,product,el_product,opts,optsValsBeforeChangedArr){var edition=(optsValsBeforeChangedArr&&optsValsBeforeChangedArr.length>0)?t_store_product_getFirstAvailableEditionData_forCertainVals(product.editions,optsValsBeforeChangedArr,el_product):t_store_product_getFirstAvailableEditionData(product.editions);if(!edition){console.log('No available edition for uid = '+product.uid+' with selected options values');return!1}
var isAvailable=(parseInt(edition.quantity)!==0);product.editionOptions.forEach(function(curOption){var value=edition[curOption.name];var el_select=t_store_product_getEditionSelectEl(el_product,curOption);el_select.find('.js-product-edition-option-variants').val(value)});t_store_product_updateEdition(recid,el_product,edition);return isAvailable}
function t_store_product_disableUnavailOpts(el_product,product){for(var i=1;i<product.editionOptions.length;i++){var curOpt=product.editionOptions[i];var el_curOpt=t_store_product_getEditionSelectEl(el_product,curOpt);var prevOpt=product.editionOptions[i-1];var el_prevOpt=t_store_product_getEditionSelectEl(el_product,prevOpt);var prevVal=el_prevOpt.find('.js-product-edition-option-variants').val();curOpt.values.forEach(function(curOptVal){var hasEdition=t_store_product_disableUnavailOpts_checkEdtn(product,curOpt,curOptVal,prevOpt,prevVal);var el_optionTag=el_curOpt.find('option[value="'+curOptVal+'"]');if(hasEdition){el_optionTag.removeAttr('disabled')}else{el_optionTag.attr('disabled','disabled')}})}}
function t_store_product_updateEdition(recid,el_product,edition){if(edition.price&&parseFloat(edition.price)!==0){var formattedPrice=t_store__getFormattedPrice(edition.price);el_product.find('.js-store-prod-price').show();el_product.find('.js-store-prod-price-val').html(formattedPrice);var cleanPrice=t_prod__cleanPrice(edition.price);el_product.find('.js-product-price').attr('data-product-price-def',cleanPrice);el_product.find('.js-product-price').attr('data-product-price-def-str',cleanPrice)}else{el_product.find('.js-store-prod-price').hide();el_product.find('.js-store-prod-price-val').html('');el_product.find('.js-product-price').attr('data-product-price-def','');el_product.find('.js-product-price').attr('data-product-price-def-str','')}
if(edition.priceold&&edition.priceold!=='0'){var formattedPriceOld=t_store__getFormattedPrice(edition.priceold);el_product.find('.js-store-prod-price-old').show();el_product.find('.js-store-prod-price-old-val').html(formattedPriceOld)}else{el_product.find('.js-store-prod-price-old').hide();el_product.find('.js-store-prod-price-old-val').html('')}
var el_skuWrapper=el_product.find('.t-store__prod-popup__sku');var el_sku=el_product.find('.js-store-prod-sku');if(edition.sku){el_sku.html(edition.sku);if(el_product.data('cardSize')==='large'){el_sku.show();el_skuWrapper.show()}}else{el_sku.html('').hide();el_skuWrapper.hide()}
el_product.attr('data-product-inv',edition.quantity);el_product.attr('data-product-lid',edition.uid).attr('data-product-uid',edition.uid);if(edition.img){el_product.attr('data-product-img',edition.img);if(el_product.data('cardSize')==='large'){t_store_product_updateEdition_moveSlider(recid,el_product,edition)}}else{var prevEditionImgUrl=el_product.attr('data-product-img');if(typeof prevEditionImgUrl!=='undefined'&&prevEditionImgUrl!==''&&el_product.data('cardSize')==='large'){t_store_product_updateEdition_moveSlider(recid,el_product,edition);el_product.attr('data-product-img','')}}}
function t_store_product_updateEdition_moveSlider(recid,el_product,edition){if(el_product.find('.t-slds').length===0){return}
var sliderWrapper=el_product.find('.t-slds__items-wrapper');var el_editionImg=el_product.find('.t-slds__item .t-slds__bgimg[data-original="'+edition.img+'"]');if(edition.img){var pos=$(el_editionImg[0]).parents('.t-slds__item').attr('data-slide-index');if(parseInt(pos)===0){pos=sliderWrapper.attr('data-slider-totalslides')}}else{pos=1}
var moveAnim=sliderWrapper.hasClass('t-slds_animated-fast')?'fast':(sliderWrapper.hasClass('t-slds_animated-slow')?'slow':'');if(moveAnim){sliderWrapper.removeClass('t-slds_animated-fast, t-slds_animated-slow').addClass('t-slds_animated-none');setTimeout(function(){sliderWrapper.removeClass('t-slds_animated-none').addClass('t-slds_animated-'+moveAnim)},800)}
sliderWrapper.attr('data-slider-pos',pos);t_slideMove(recid)}
function t_store_product_triggerSoldOutMsg(el_product,isSoldOut,opts){el_product.find('.js-store-prod-sold-out').remove();var el_buyBtn=el_product.find('[href="#order"]');if(el_product.data('cardSize')==='large'){var el_buyBtnTxt=el_buyBtn.find('.js-store-prod-popup-buy-btn-txt');if(isSoldOut){var soldOutMsg=t_store_get_soldOutMsg_html();el_product.find('.js-store-price-wrapper').append(soldOutMsg);el_buyBtn.addClass('t-store__prod-popup__btn_disabled');el_buyBtnTxt.text(t_store_dict('soldOut'))}else{el_buyBtn.removeClass('t-store__prod-popup__btn_disabled');el_buyBtnTxt.text(opts.popup_opts.btnTitle)}}else if(el_product.data('cardSize')==='small'){if(isSoldOut){var soldOutMsg=t_store_get_soldOutMsg_html();el_product.find('.js-store-price-wrapper').append(soldOutMsg);el_buyBtn.hide()}else{el_buyBtn.show()}}}
function t_store_product_addOneOptionsControl(type,curOption,optionsWrapper){if(curOption.name){var optionsTags='';if(type==='modificator'){if(typeof curOption.values==='undefined'){return}
var tplOneOptionTag='<option value="[[value]]" data-product-variant-price="[[price]]">[[value]]</option>';var valuesArr=curOption.values.split('\n');$.each(valuesArr,function(key,value){var valueText=value.split('=')[0];var valuePrice=value.split('=')[1];optionsTags+=tplOneOptionTag.replace(/\[\[value\]\]/g,t_store_escapeQuote(valueText)).replace(/\[\[price\]\]/g,(valuePrice?valuePrice:''))});var tplSelect=t_store_get_control_option_html();var str=tplSelect.replace(/\[\[name\]\]/g,curOption.name).replace(/\[\[optiontags\]\]/g,optionsTags)}else{var tplOneOptionTag='<option value="[[value]]" >[[value]]</option>';$.each(curOption.values,function(key,value){optionsTags+=tplOneOptionTag.replace(/\[\[value\]\]/g,t_store_escapeQuote(value))});var tplSelect=t_store_get_control_editionOption_html();var str=tplSelect.replace(/\[\[id\]\]/g,curOption.id).replace(/\[\[name\]\]/g,curOption.name).replace(/\[\[optiontags\]\]/g,optionsTags)}
optionsWrapper.append(str);if(type==='editionopt'){return optionsWrapper.find('.js-product-edition-option').last()}}}
function t_store_product_getEditionOptionsArr(product){var editions=product.editions;var defaultProps=['quantity','price','priceold','gallery','sku','uid','img'];var allProps=Object.keys(editions[0]);var editionOptions=[];allProps.forEach(function(p){if(defaultProps.indexOf(p)===-1){var propEl={name:p,id:t_store_combineOptionIdByName(p),values:t_store_product_getEditionOptionsArr_getValues(p,editions)};editionOptions.push(propEl)}});return editionOptions}
function t_store_product_getFirstAvailableEditionData(editions){for(var i=0;i<editions.length;i++){var curEdition=editions[i];if(parseInt(curEdition.quantity)!==0){return curEdition}}
return editions[0]}
function t_store_product_getFirstAvailableEditionData_forCertainVals(editions,optsValsBeforeChangedArr,el_product){var firstUnavailable='';for(var i=0;i<editions.length;i++){var curEdition=editions[i];var doesContainSelectedOpts=!0;for(var j=0;j<optsValsBeforeChangedArr.length;j++){var optName=optsValsBeforeChangedArr[j].name;var optVal=t_store_product_getCurEditionOptValByName(el_product,optName);if(curEdition[optName]!==optVal){doesContainSelectedOpts=!1;break}}
if(doesContainSelectedOpts){if(parseInt(curEdition.quantity)!==0){return curEdition}else if(!firstUnavailable){firstUnavailable=curEdition}}}
return firstUnavailable}
function t_store_product_disableUnavailOpts_getValsComb(el_product,product,checkingOptName,checkingOptVal){var combination={};for(var i=0;i<product.editionOptions.length;i++){var curOption=product.editionOptions[i];var el_select=t_store_product_getEditionSelectEl(el_product,curOption);var controlVal=el_select.find('.js-product-edition-option-variants').val();combination[curOption.name]=(curOption.name===checkingOptName)?checkingOptVal:controlVal}
return combination}
function t_store_product_disableUnavailOpts_checkEdtn(product,curOpt,curOptVal,prevOpt,prevVal){var hasEdition=!1;for(var i=0;i<product.editions.length;i++){var edition=product.editions[i];if(edition[prevOpt.name]===prevVal&&edition[curOpt.name]===curOptVal){hasEdition=!0;break}}
return hasEdition}
function t_store_product_getEditionOptionsArr_getValues(prop,editions){var values=[];editions.forEach(function(curEdition){var val=curEdition[prop];if(values.indexOf(val)===-1){values.push(val)}});return values}
function t_store_product_getCurEditionOptValByName(el_product,id){var el_optionsWrap=el_product.find('.js-product-edition-option[data-edition-option-id="'+id+'"]');return el_optionsWrap.find('.js-product-edition-option-variants').val()}
function t_store_product_getEditionSelectEl(wrapper,curOption){return wrapper.find('.js-product-edition-option[data-edition-option-id="'+curOption.id+'"]')}
function t_store_combineOptionIdByName(text){return text.replace(/[\/\\'"<>{}]/g,'')}
function t_store_getProductFirstImg(product){if(product.gallery&&product.gallery[0]==='['){var galleryArr=jQuery.parseJSON(product.gallery);if(galleryArr[0]&&galleryArr[0].img){return galleryArr[0].img}}
return ''}
function t_store__getFormattedPrice(price){if(typeof price=='undefined'||price==0||price==''){return ''}
price=t_prod__cleanPrice(price);price=price.toString();var showDecPart=(typeof window.tcart!='undefined'&&typeof window.tcart.currency_dec!='undefined'&&window.tcart.currency_dec=='00');var hasDefinedSeparator=(typeof window.tcart!='undefined'&&typeof window.tcart.currency_sep!='undefined'&&window.tcart.currency_sep=='.');if(showDecPart){if(price.indexOf('.')===-1&&price.indexOf(',')===-1){price=price+'.00'}else{var foo=price.substr(price.indexOf('.')+1);if(foo.length===1){price=price+'0'}}}
if(hasDefinedSeparator){price=price.replace(',','.')}else{price=price.replace('.',',')}
price=price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,' ');return price}
function t_store_filters_init(recid,opts,data){if(!data.sort&&!data.search&&(!data.filters||data.filters.length===0)){return}
var el_rec=$('#rec'+recid);if(el_rec.find('.js-store-filter').length>0){return}
t_store_filters_drawControls(recid,opts,data);t_store_filters_showHideFilterControls(recid,el_rec);t_store_filters_handleOnChange(recid,opts)}
function t_store_filters_showHideFilterControls(recid,el_rec){$(window).on('click',function(e){var el_title='';var clickedOnTitle=(($(e.target).hasClass('js-store-filter-item-title')||$(e.target).parents('js-store-filter-item-title').length>0)&&$(e.target).parents('#rec'+recid).length>0);var clickedInsideWrapper=($(e.target).hasClass('js-store-filter-item-controls-wr')||$(e.target).parents('.js-store-filter-item-controls-wr').length>0);if(clickedOnTitle){el_title=$(e.target)}else if(clickedInsideWrapper){return}else{el_rec.find('.js-store-filter-item').removeClass('active');return}
var el_item=el_title.parents('.js-store-filter-item');var el_controlsWrap=el_item.find('.js-store-filter-item-controls-wr');if(el_item.hasClass('active')){el_item.removeClass('active')}else{$('.js-store-filter-item').removeClass('active');el_item.addClass('active');if(el_controlsWrap.offset().left<10){el_controlsWrap.addClass('t-store__filter__item-controls-wrap_left')}else if(el_controlsWrap.offset().right<0){console.log('controlsWrap offset right < 0')}}})}
function t_store_filters_drawControls(recid,opts,data){t_store_filters_cashSortOptsInData(data);var str='';var filterClass='t-store__filter js-store-filter';filterClass+=opts.isHorizOnMob?' t-store__filter_horiz-on-mobile':'';str+='<div class="'+filterClass+'">';str+='    <div class="t-store__filter__controls-wrapper">';str+='        '+t_store_filters_mobileBtns_getHtml(recid,data);str+='        '+t_store_filters_opts_getHtml(recid,data);str+='        <div class="t-store__filter__search-and-sort">';if(data.search){str+=t_store_filters_drawControls_getSearchHtml()}
if(data.sort){str+=t_store_filters_drawControls_getSortHtml(data)}
str+='        </div>';str+='    </div>';str+='    '+t_store_filters_opts_chosenVals_getHtml();str+='    '+t_store_filters_prodsNumber_getHtml();str+='</div>';var el_rec=$('#rec'+recid);var el_filterWrapper=el_rec.find('.js-store-parts-select-container');el_rec.find('.js-store-filter').remove();el_filterWrapper.append(str);t_store_filters_opts_checkboxes_groupCheckedToHiddenInput(recid);t_store_filters_opts_customSelect_saveToHiddenInput(recid);t_store_filters_initUIBtnsOnMobile(el_rec);t_store_filters_initResetBtn(recid,opts)}
function t_store_filters_initResetBtn(recid,opts){var el_rec=$('#rec'+recid);el_rec.find('.js-store-filter-reset').on('click',function(){el_rec.find('.js-store-filter-search, .js-store-filter-sort, .js-store-filter-opt').val('');var el_min=el_rec.find('.js-store-filter-pricemin');var minPrice=t_store__getFormattedPrice(el_min.attr('data-min-val'));el_min.val(minPrice);var el_max=el_rec.find('.js-store-filter-pricemax');var maxPrice=t_store__getFormattedPrice(el_max.attr('data-max-val'));el_max.val(maxPrice);el_rec.find('.js-store-filter-onlyavail, .js-store-filter-opt-chb').prop('checked',!1);el_rec.find('.js-store-filter-custom-select').removeClass('active');el_min.data('previousMin',minPrice);el_max.data('previousMax',maxPrice);el_rec.find('.t-store__filter__item_select .js-store-filter-opt').data('previousVal','');t_store_filters_send(recid,opts);el_rec.find('.js-store-filter-chosen-item').remove();el_rec.find('.js-store-filter-reset').removeClass('t-store__filter__reset_visible')})}
function t_store_filters_cashSortOptsInData(data){data.sortControlData={name:'sort',label:t_store_dict('sort-label'),values:[{value:'',text:t_store_dict('sort-default')},{value:'price:asc',text:t_store_dict('sort-price-asc')},{value:'price:desc',text:t_store_dict('sort-price-desc')},{value:'title:asc',text:t_store_dict('sort-name-asc')},{value:'title:desc',text:t_store_dict('sort-name-desc')},{value:'created:desc',text:t_store_dict('sort-created-desc')},{value:'created:asc',text:t_store_dict('sort-created-asc')}]}}
function t_store_filters_drawControls_getSortHtml(data){var str='';str+='<div class="t-store__filter__sort">';str+='<div class="t-store__sort-select-wrapper">';str+='    <select class="t-store__sort-select t-descr t-descr_xxs js-store-filter-sort" name="sort">';for(var i=0;i<data.sortControlData.values.length;i++){var opt=data.sortControlData.values[i];str+='<option value="'+opt.value+'">'+opt.text+'</option>'}
str+='    </select>';str+='</div>';str+='</div>';return str}
function t_store_filters_drawControls_getSearchHtml(){var str='';str+='<div class="t-store__filter__search t-descr t-descr_xxs">';str+='    <div class="t-store__search-wrapper">';str+='        <input class="t-store__filter__input js-store-filter-search" type="text" name="query" placeholder="'+t_store_dict('searchplaceholder')+'">';str+='<svg class="t-store__search-icon js-store-filter-search-btn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88"> <path fill="#757575" d="M85 31.1c-.5-8.7-4.4-16.6-10.9-22.3C67.6 3 59.3 0 50.6.6c-8.7.5-16.7 4.4-22.5 11-11.2 12.7-10.7 31.7.6 43.9l-5.3 6.1-2.5-2.2-17.8 20 9 8.1 17.8-20.2-2.1-1.8 5.3-6.1c5.8 4.2 12.6 6.3 19.3 6.3 9 0 18-3.7 24.4-10.9 5.9-6.6 8.8-15 8.2-23.7zM72.4 50.8c-9.7 10.9-26.5 11.9-37.6 2.3-10.9-9.8-11.9-26.6-2.3-37.6 4.7-5.4 11.3-8.5 18.4-8.9h1.6c6.5 0 12.7 2.4 17.6 6.8 5.3 4.7 8.5 11.1 8.9 18.2.5 7-1.9 13.8-6.6 19.2z"></path></svg>';str+='<svg class="t-store__search-close-icon js-store-filter-search-close" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#757575" fill-rule="evenodd" clip-rule="evenodd" d="M0.781448 10.6465L10.7814 0.646484L11.4886 1.35359L1.48856 11.3536L0.781448 10.6465Z" fill="black"/><path fill="#757575" fill-rule="evenodd" clip-rule="evenodd" d="M10.6464 11.3536L0.646439 1.35359L1.35355 0.646484L11.3535 10.6465L10.6464 11.3536Z" fill="black"/></svg>';str+='    </div>';str+='</div>';return str}
function t_store_filters_initUIBtnsOnMobile(el_rec){var el_filtBtn=el_rec.find('.js-store-filter-mob-btn');var el_filtOpts=el_rec.find('.t-store__filter__options');var el_searchBtn=el_rec.find('.js-store-search-mob-btn');var el_searchWrap=el_rec.find('.t-store__filter__search-and-sort');el_filtBtn.on('click',function(){el_searchWrap.hide();el_searchBtn.removeClass('active');if(el_filtBtn.hasClass('active')){el_filtOpts.hide();el_filtBtn.removeClass('active')}else{el_filtOpts.show();el_filtBtn.addClass('active')}});el_searchBtn.on('click',function(){el_filtOpts.hide();el_filtBtn.removeClass('active');if(el_searchBtn.hasClass('active')){el_searchWrap.hide();el_searchBtn.removeClass('active')}else{el_searchWrap.show();el_searchBtn.addClass('active')}})}
function t_store_filters_send(recid,opts){var filters={};var el_rec=$('#rec'+recid);var minVal=t_prod__cleanPrice(el_rec.find('.js-store-filter-pricemin').attr('data-min-val'));var checkedMinV=t_prod__cleanPrice(el_rec.find('.js-store-filter-pricemin').val());if(checkedMinV!==minVal){filters['price:min']=checkedMinV}
var maxVal=t_prod__cleanPrice(el_rec.find('.js-store-filter-pricemax').attr('data-max-val'));var checkedMaxV=t_prod__cleanPrice(el_rec.find('.js-store-filter-pricemax').val());if(checkedMaxV!==maxVal){filters['price:max']=checkedMaxV}
if(el_rec.find('.js-store-filter-onlyavail')[0]&&el_rec.find('.js-store-filter-onlyavail')[0].checked){filters.quantity='y'}
el_rec.find('.js-store-filter-opt').each(function(){var v=$(this).val();var name=$(this).attr('name');if(name==='sort'){return}
if(v&&v!==''&&$(this).attr('data-info-type')==='array'){filters[name]=v.split('&&')}else if(v){filters[name]=v}});var searchV=el_rec.find('.js-store-filter-search').val();if(searchV){filters.query=searchV}
var sort={};var sortV=el_rec.find('.js-store-filter-sort').val();if(sortV===''){sortV=el_rec.find('.js-store-filter-opt[name="sort"]').val()}
if(sortV){var fieldName=sortV.split(':')[0];var sortDirection=sortV.split(':')[1];sort[fieldName]=sortDirection}
opts.filters=filters;opts.sort=sort;t_store_filters_prodsNumber_update(el_rec,opts);t_store_showLoadersForProductsList(recid);t_store_loadProducts('',recid,opts)}
function t_store_filters_mobileBtns_getHtml(recid,data){var str='';if(data.filters.length>0||data.sort){str+='<div class="js-store-filter-mob-btn t-store__filter__opts-mob-btn t-name t-name_xs">';str+='<svg class="t-store__filter__opts-mob-btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 63.42 100"><defs><style>.cls-1{fill:#1d1d1b;}</style></defs><title>2Монтажная область 1 копия</title><path class="cls-1" d="M13.75,22.59V.38h-6V22.59a10.75,10.75,0,0,0,0,20.64V99.62h6V43.23a10.75,10.75,0,0,0,0-20.64Z"/><path class="cls-1" d="M63.42,67.09a10.75,10.75,0,0,0-7.75-10.32V.38h-6V56.77a10.75,10.75,0,0,0,0,20.64V99.62h6V77.41A10.75,10.75,0,0,0,63.42,67.09Z"/></svg>';str+=t_store_dict('filters');str+='</div>'}
if(data.search){str+='<div class="js-store-search-mob-btn t-store__filter__search-mob-btn t-descr t-descr_xs">';str+='<svg class="t-store__filter__search-mob-btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88"> <path fill="#3f3f3f" d="M85 31.1c-.5-8.7-4.4-16.6-10.9-22.3C67.6 3 59.3 0 50.6.6c-8.7.5-16.7 4.4-22.5 11-11.2 12.7-10.7 31.7.6 43.9l-5.3 6.1-2.5-2.2-17.8 20 9 8.1 17.8-20.2-2.1-1.8 5.3-6.1c5.8 4.2 12.6 6.3 19.3 6.3 9 0 18-3.7 24.4-10.9 5.9-6.6 8.8-15 8.2-23.7zM72.4 50.8c-9.7 10.9-26.5 11.9-37.6 2.3-10.9-9.8-11.9-26.6-2.3-37.6 4.7-5.4 11.3-8.5 18.4-8.9h1.6c6.5 0 12.7 2.4 17.6 6.8 5.3 4.7 8.5 11.1 8.9 18.2.5 7-1.9 13.8-6.6 19.2z"></path></svg>';str+='</div>'}
return str}
function t_store_filters_opts_getHtml(recid,data){var str='';if(data.filters.length===0&&!data.sort){return ''}
str+='<div class="t-store__filter__options '+(!data.sort&&!data.search?'t-store__filter__options_center':'')+'">';var filtersArr=data.filters;if(data.sort){str+=t_store_filters_opts_getHtml_customSelect(data.sortControlData)}
for(var i=0;i<filtersArr.length;i++){var f=filtersArr[i];if(f.control==='select'){str+=t_store_filters_opts_getHtml_customSelect(f)}else if(f.control==='checkbox'){str+=t_store_filters_opts_getHtml_checkbox(f)}else if(f.control==='range'&&f.name==='price'){str+=t_store_filters_opts_getHtml_range(f)}}
str+='</div>';return str}
function t_store_filters_opts_getHtml_customSelect(f){var str='';var sortClass=(f.name==='sort'?'t-store__filter__item_sort-mobile':'');str+='<div class="'+sortClass+' t-store__filter__item t-store__filter__item_select js-store-filter-item t-descr t-descr_xxs">';str+='    <div class="t-store__filter__item-title js-store-filter-item-title">'+f.label+'</div>';str+='    <div class="t-store__filter__item-controls-wrap js-store-filter-item-controls-wr">';str+='        <div class="t-store__filter__item-controls-container">';str+='        <input type="hidden" class="js-store-filter-opt" name="'+f.name+'"  >';if(f.values){for(var j=0;j<f.values.length;j++){var v=f.values[j].value;var text=f.values[j].text;if(v!==''){str+='<div class="t-store__filter__custom-sel js-store-filter-custom-select" data-select-val="'+v+'">'+(text?text:v)+'</div>'}}}
str+='        </div>';str+='    </div>';str+='</div>';return str}
function t_store_filters_opts_getHtml_checkbox(f){var str='';if(f.name==='quantity'){str+='<div class="t-store__filter__item t-store__filter__item_available js-store-filter-item t-descr t-descr_xxs">';str+='<div class="t-store__filter__item-title js-store-filter-item-title">';str+=(f.label?f.label:t_store_dict('filter-available-name'));str+='</div>';str+='<div class="t-store__filter__item-controls-wrap js-store-filter-item-controls-wr">';str+='<label class="t-checkbox__control t-descr t-descr_xxs">';str+='<input class="t-checkbox js-store-filter-onlyavail" type="checkbox">';str+='<div class="t-checkbox__indicator"></div>';str+=t_store_dict('filter-available-label');str+='</label>';str+='</div>';str+='</div>'}else{str+='<div class="t-store__filter__item t-store__filter__item_checkbox js-store-filter-item t-descr t-descr_xxs">';str+='    <div class="t-store__filter__item-title js-store-filter-item-title">'+f.label+'</div>';str+='    <div class="t-store__filter__item-controls-wrap js-store-filter-item-controls-wr">';str+='        <div class="t-store__filter__item-controls-container">';str+='            <input type="hidden" class="js-store-filter-opt" name="'+f.name+'" data-info-type="array">';if(f.values){for(var j=0;j<f.values.length;j++){var v=f.values[j].value;if(v!==''){str+='<label class="t-checkbox__control t-descr t-descr_xxs">';str+='<input class="t-checkbox js-store-filter-opt-chb" type="checkbox" name="'+v+'">';str+='<div class="t-checkbox__indicator"></div>';str+=v;str+='</label>'}}}
str+='        </div>';str+='    </div>';str+='</div>'}
return str}
function t_store_filters_opts_getHtml_range(f){var str='';str+='<div class="t-store__filter__item t-store__filter__item_price js-store-filter-item t-descr t-descr_xxs">';str+='    <div class="t-store__filter__item-title js-store-filter-item-title">';str+=(f.label?f.label:t_store_dict('filter-price-name'));str+='    </div>';str+='    <div class="t-store__filter__item-controls-wrap js-store-filter-item-controls-wr">';str+='        <input class="t-store__filter__input js-store-filter-pricemin" type="text" name="price:min" data-min-val="'+f.min+'" value="'+t_store__getFormattedPrice(f.min)+'">';str+='&nbsp;—&nbsp;<input class="t-store__filter__input js-store-filter-pricemax" type="text" name="price:max" data-max-val="'+f.max+'" value="'+t_store__getFormattedPrice(f.max)+'">';str+='&nbsp;<button class="t-store__filter__btn js-store-filter-price-btn">OK</button>';str+='    </div>';str+='</div>';return str}
function t_store_filters_opts_checkboxes_groupCheckedToHiddenInput(recid){var el_rec=$('#rec'+recid);el_rec.find('.js-store-filter-opt-chb').on('change',function(){t_store_filters_opts_checkboxes_changeHiddenInput($(this))})}
function t_store_filters_opts_checkboxes_changeHiddenInput(el_changedCheckbox){var el_hiddenInput=el_changedCheckbox.parents('.js-store-filter-item').find('.js-store-filter-opt');var value=el_hiddenInput.val();if(el_changedCheckbox[0].checked){if(value===''){value=el_changedCheckbox.attr('name')}else{value+='&&'+el_changedCheckbox.attr('name')}}else{var arr=value.split('&&');var index=arr.indexOf(el_changedCheckbox.attr('name'));if(index!==-1){arr.splice(index,1)}
value=arr.join('&&')}
el_hiddenInput.val(value)}
function t_store_filters_opts_customSelect_saveToHiddenInput(recid){var el_rec=$('#rec'+recid);el_rec.find('.js-store-filter-custom-select').on('click',function(){var el_hiddenInput=$(this).parents('.js-store-filter-item').find('.js-store-filter-opt');var el_filterItem=$(this).parents('.js-store-filter-item');if($(this).hasClass('active')){$(this).removeClass('active');el_hiddenInput.val('');return}
var val=$(this).attr('data-select-val');el_hiddenInput.val(val);el_filterItem.find('.js-store-filter-custom-select').removeClass('active');$(this).addClass('active')})}
function t_store_filters_opts_chosenVals_getHtml(){var str='';str+='<div class="t-store__filter__chosen-wrapper js-store-opts-chosen-wrapper">';str+='<div class="t-store__filter__reset js-store-filter-reset t-descr t-descr_xxs">'+t_store_dict('filter-reset')+'</div>';str+='</div>';return str}
function t_store_filters_prodsNumber_getHtml(){var str='';str+='<div class="t-store__filter__prods-number js-store-filters-prodsnumber-wrap t-descr t-descr_xxs" style="display:none;">';str+=t_store_dict('filter-prodsnumber');str+=': <span class="js-store-filters-prodsnumber">';str+='</span>';str+='</div>';return str}
function t_store_filters_prodsNumber_update(rec,opts,obj){if(!opts.filters){return}
var changedFiltersNumber=Object.keys(opts.filters).length;if(changedFiltersNumber>0&&obj&&obj.products.length>0){rec.find('.js-store-filters-prodsnumber').text(obj.total);rec.find('.js-store-filters-prodsnumber-wrap').show();return}
rec.find('.js-store-filters-prodsnumber-wrap').hide()}
function t_store_filters_opts_chosenVal_add(recid,val,el_control,label){var str='';str+='<div class="t-store__filter__chosen-val js-store-filter-chosen-item t-descr t-descr_xxs" data-field-val="'+val+'">';str+='<span class="t-store__filter__chosen-val-close">✕</span>&nbsp;';str+=(label?label:val);str+='</div>';var el_wrapper=$('#rec'+recid).find('.js-store-opts-chosen-wrapper');el_wrapper.prepend(str);var el_chosenTagItem=$('.js-store-filter-chosen-item[data-field-val="'+val+'"]');el_chosenTagItem.data('controlElem',el_control);if(el_wrapper.find('.js-store-filter-chosen-item').length>1){el_wrapper.find('.js-store-filter-reset').addClass('t-store__filter__reset_visible')}}
function t_store_filters_handleOnChange(recid,opts){var el_rec=$('#rec'+recid);var el_filterWrapper=el_rec.find('.js-store-parts-select-container');t_store_filters_handleOnChange_avail(recid,opts,el_rec);t_store_filters_handleOnChange_price(recid,opts,el_rec);t_store_filters_handleOnChange_checkbox(recid,opts,el_rec);t_store_filters_handleOnChange_selectbox(recid,opts,el_rec);t_store_filters_handleOnChange_sort(recid,opts,el_rec);t_store_filters_handleOnChange_search(recid,opts,el_rec);t_store_filters_opts_checkedValues_hideOnClick(recid,opts,el_filterWrapper)}
function t_store_filters_handleOnChange_avail(recid,opts,el_rec){el_rec.find('.js-store-filter-onlyavail').on('change',function(){var text=$(this).parents('label').text();if($(this)[0].checked){t_store_filters_opts_chosenVal_add(recid,text,$(this))}else{t_store_filters_opts_chosenVal_hide(el_rec,text)}
t_store_filters_send(recid,opts)})}
function t_store_filters_handleOnChange_price(recid,opts,el_rec){var el_priceFiltItem=el_rec.find('.js-store-filter-item.t-store__filter__item_price');var minVal=t_prod__cleanPrice(el_rec.find('.js-store-filter-pricemin').attr('data-min-val'));var maxVal=t_prod__cleanPrice(el_rec.find('.js-store-filter-pricemax').attr('data-max-val'));var el_min=el_rec.find('.js-store-filter-pricemin');el_min.data('previousMin',minVal);el_min.on('keypress tstoreMinPriceTriggerReset',function(e){if(e.type==='keypress'&&e.which!==13){return}
var isChanged=t_store_filters_handleOnChange_price_checkMin(recid,el_min,minVal,maxVal);if(isChanged){t_store_filters_send(recid,opts);el_min.blur();if(!window.isMobile){el_priceFiltItem.removeClass('active')}}});var el_max=el_rec.find('.js-store-filter-pricemax');el_max.data('previousMax',maxVal);el_max.on('keypress tstoreMaxPriceTriggerReset',function(e){if(e.type==='keypress'&&e.which!==13){return}
var isChanged=t_store_filters_handleOnChange_price_checkMax(recid,el_max,minVal,maxVal);if(isChanged){t_store_filters_send(recid,opts);el_max.blur();if(!window.isMobile){el_priceFiltItem.removeClass('active')}}});var el_btn=el_rec.find('.js-store-filter-price-btn');el_btn.on('click',function(e){var isChanged=!1;isChanged=t_store_filters_handleOnChange_price_checkMax(recid,el_max,minVal,maxVal);if(!isChanged){isChanged=t_store_filters_handleOnChange_price_checkMin(recid,el_min,minVal,maxVal)}
if(isChanged){t_store_filters_send(recid,opts);if(!window.isMobile){el_priceFiltItem.removeClass('active')}}})}
function t_store_filters_handleOnChange_price_checkMax(recid,el_max,minVal,maxVal){var el_rec=$('#rec'+recid);var val=t_prod__cleanPrice(el_max.val());if(val!==el_max.data('previousMax')){val=t_store_filters_handleOnChange_checkInRange(val,el_max,minVal,maxVal);var text='< '+el_max.val();if(el_max.data('previousMax')){t_store_filters_opts_chosenVal_hide(el_rec,el_max.data('previousMax'))}
if(val!==maxVal){t_store_filters_opts_chosenVal_add(recid,val,el_max,text)}
el_max.data('previousMax',val);return!0}
return!1}
function t_store_filters_handleOnChange_price_checkMin(recid,el_min,minVal,maxVal){var el_rec=$('#rec'+recid);var val=t_prod__cleanPrice(el_min.val());if(val!==el_min.data('previousMin')){val=t_store_filters_handleOnChange_checkInRange(val,el_min,minVal,maxVal);var text='> '+el_min.val();if(el_min.data('previousMin')){t_store_filters_opts_chosenVal_hide(el_rec,el_min.data('previousMin'))}
if(val!==minVal){t_store_filters_opts_chosenVal_add(recid,val,el_min,text)}
el_min.data('previousMin',val);return!0}
return!1}
function t_store_filters_handleOnChange_checkInRange(val,el_input,minVal,maxVal){if(val>maxVal){val=maxVal;el_input.val(maxVal)}else if(val<minVal){val=minVal;el_input.val(minVal)}
return val}
function t_store_filters_handleOnChange_checkbox(recid,opts,el_rec){el_rec.find('.js-store-filter-opt-chb').on('change',function(){var text=$(this).attr('name');if($(this)[0].checked){t_store_filters_opts_chosenVal_add(recid,text,$(this))}else{t_store_filters_opts_chosenVal_hide(el_rec,text)}
t_store_filters_send(recid,opts)})}
function t_store_filters_handleOnChange_selectbox(recid,opts,el_rec){el_rec.find('.js-store-filter-custom-select').on('click',function(){var text=$(this).attr('data-select-val');var label=$(this).text();var el_hiddenInput=$(this).parents('.js-store-filter-item').find('.js-store-filter-opt');var previous=el_hiddenInput.data('previousVal');if(previous){t_store_filters_opts_chosenVal_hide(el_rec,previous)}
if(previous===text){t_store_filters_send(recid,opts);el_hiddenInput.data('previousVal','');return}
t_store_filters_opts_chosenVal_add(recid,text,$(this),label);t_store_filters_send(recid,opts);el_hiddenInput.data('previousVal',text)})}
function t_store_filters_handleOnChange_search(recid,opts,el_rec){var prevQuery='';var el_input=el_rec.find('.js-store-filter-search');var el_closeBtn=el_rec.find('.js-store-filter-search-close');var el_searchBtn=el_rec.find('.js-store-filter-search-btn');el_searchBtn.on('click',function(){if(prevQuery!==el_input.val()){t_store_filters_opts_chosenVal_hide(el_rec,prevQuery);prevQuery=el_input.val();t_store_filters_handleOnChange_search_send(recid,el_input,el_closeBtn,opts)}});el_input.on('keypress tstoreSearchTriggerReset',function(e){if(e.type==='keypress'&&e.which!==13){return}
if(prevQuery!==el_input.val()){t_store_filters_opts_chosenVal_hide(el_rec,prevQuery);prevQuery=el_input.val();t_store_filters_handleOnChange_search_send(recid,el_input,el_closeBtn,opts)}}).on('keyup',function(){if($(this).val().length>0){el_closeBtn.show()}else if($(this).val().length===0){el_closeBtn.hide()}});el_closeBtn.on('click',function(){t_store_filters_opts_chosenVal_hide(el_rec,prevQuery);el_input.val('');prevQuery='';t_store_filters_handleOnChange_search_send(recid,el_input,el_closeBtn,opts)})}
function t_store_filters_handleOnChange_search_send(recid,el_input,el_closeBtn,opts){var val=el_input.val();if(val!==''){var chosenValText=t_store_dict('searchplaceholder')+': '+val;t_store_filters_opts_chosenVal_add(recid,val,el_input,chosenValText)}else{el_closeBtn.hide()}
t_store_filters_send(recid,opts);el_input.blur()}
function t_store_filters_handleOnChange_sort(recid,opts,el_rec){el_rec.find('.js-store-filter-sort').on('change',function(){t_store_filters_send(recid,opts)})}
function t_store_filters_opts_chosenVal_hide(el_rec,value){el_rec.find('.js-store-filter-chosen-item[data-field-val="'+value+'"]').remove();if(el_rec.find('.js-store-filter-chosen-item').length<=1){el_rec.find('.js-store-filter-reset').removeClass('t-store__filter__reset_visible')}}
function t_store_filters_opts_checkedValues_hideOnClick(recid,opts,el_filterWrapper){el_filterWrapper.on('click','.js-store-filter-chosen-item',function(){var el_chosenItem=$(this);var el_control=el_chosenItem.data('controlElem');if(!el_control){console.log('smth wrong with current filter');return}
if(el_control.hasClass('js-store-filter-opt-chb')||el_control.hasClass('js-store-filter-onlyavail')){el_control[0].checked=!1;el_control.trigger('change')}else if(el_control.hasClass('js-store-filter-custom-select')){el_control.trigger('click')}else if(el_control.hasClass('js-store-filter-pricemin')){var defVal=t_store__getFormattedPrice(el_control.attr('data-min-val'));el_control.val(defVal);el_control.trigger('tstoreMinPriceTriggerReset')}else if(el_control.hasClass('js-store-filter-pricemax')){var defVal=t_store__getFormattedPrice(el_control.attr('data-max-val'));el_control.val(defVal);el_control.trigger('tstoreMaxPriceTriggerReset')}else if(el_control.hasClass('js-store-filter-search')){el_control.val('').trigger('tstoreSearchTriggerReset')}
el_chosenItem.remove()})}
function t_store_oneProduct_init(recid,opts){var el_prod=$('#rec'+recid+' .js-store-product_single');var uid=el_prod.attr('data-product-gen-uid');if(!window.tStoreSingleProductsisRequested){t_store_oneProduct_requestAllSingle();window.tStoreSingleProductsisRequested=!0;el_prod.bind('tStoreSingleProductsLoaded',function(){t_store_oneProduct_fill(recid,window.tStoreSingleProdsObj[uid],opts)})}else{if(window.tStoreSingleProdsObj){t_store_oneProduct_fill(recid,window.tStoreSingleProdsObj[uid],opts)}else{el_prod.bind('tStoreSingleProductsLoaded',function(){t_store_oneProduct_fill(recid,window.tStoreSingleProdsObj[uid],opts)})}}}
function t_store_oneProduct_requestAllSingle(){var el_singleProds=$('.js-store-product_single');var arrId=[];for(var i=0;i<el_singleProds.length;i++){arrId.push($(el_singleProds[i]).attr('data-product-gen-uid'))}
t_store_loadProducts_byId(arrId).then(function(data){if(typeof data!=='string'||data.substr(0,1)!=='{'){console.log('Can\'t get products array by uid list')}
try{var dataObj=jQuery.parseJSON(data);var productsArr=dataObj.products}catch(e){console.log(data)}
if(productsArr===''){console.log('Can\'t get products array by uid list');return}
window.tStoreSingleProdsObj=t_store_oneProduct_prodsArrToAssociative(productsArr);el_singleProds.trigger('tStoreSingleProductsLoaded')})}
function t_store_oneProduct_prodsArrToAssociative(productsArr){var obj={};for(var i=0;i<productsArr.length;i++){var cur=productsArr[i];obj[cur.uid]=cur}
return obj}
function t_store_oneProduct_fill(recid,data,opts){var el_rec=$('#rec'+recid);var el_product=el_rec.find('.js-product');el_product.data('cardSize','large');t_store_oneProduct_fill_options(recid,data,el_product,opts)}
function t_store_oneProduct_fill_options(recid,data,el_product,opts){t_store_addProductOptions(recid,data,el_product,opts,'largecard');t_prod__init(recid)}